{"version":3,"file":"page.js","sources":["../../src/js/page/utils.js","../../src/js/utils/storage.js","../../src/js/page/worker-messenger.js","../../src/js/page/gzip.js","../../src/js/page/svg-file.js","../../src/js/page/ui/pan-zoom.js","../../src/js/page/ui/svg-output.js","../../src/js/page/ui/code-output.js","../../src/js/page/prism.js","../../src/js/page/ui/output.js","../../src/js/page/ui/ripple.js","../../src/js/page/ui/spinner.js","../../src/js/page/ui/floating-action-button.js","../../src/js/page/ui/download-button.js","../../src/js/page/ui/copy-button.js","../../src/js/page/ui/bg-fill-button.js","../../src/js/page/ui/results.js","../../node_modules/events/events.js","../../src/js/page/ui/material-slider.js","../../src/js/page/ui/settings.js","../../src/js/page/ui/main-menu.js","../../src/js/page/ui/toasts.js","../../src/js/page/ui/file-drop.js","../../src/js/page/ui/preloader.js","../../src/js/page/ui/changelog.js","../../src/js/page/ui/results-container.js","../../src/js/page/ui/view-toggler.js","../../src/js/page/results-cache.js","../../src/js/page/ui/main-ui.js","../../src/js/page/main-controller.js","../../src/js/page/svgo.js","../../src/js/page/index.js"],"sourcesContent":["\"use strict\";\n\nexport const domReady = new Promise(resolve => {\n  function checkState() {\n    if (document.readyState != 'loading') resolve();\n  }\n  document.addEventListener('readystatechange', checkState);\n  checkState();\n});\n\nconst range = document.createRange();\nrange.selectNode(document.documentElement);\n\nexport function strToEl(str) {\n  const frag = range.createContextualFragment(str);\n  return frag.children[0];\n}\n\nconst entityMap = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  \"/\": '&#x2F;'\n};\n\nexport function escapeHTML(str) {\n  return String(str).replace(/[&<>\"'\\/]/g, s => entityMap[s]);\n}\n\nexport function escapeHtmlTag(strings, ...values) {\n  values = values.map(s => escapeHTML(s));\n  return strings.reduce((str, val, i) => str += val + (values[i] || ''), '');\n};\n\nexport function readFileAsText(file) {\n  return new Response(file).text();\n};\n\nfunction transitionClassFunc({removeClass = false}={}) {\n  return function(el, className = 'active', transitionClass = 'transition') {\n    if (removeClass) {\n      if (!el.classList.contains(className)) return Promise.resolve();\n    }\n    else {\n      if (el.classList.contains(className)) return Promise.resolve();\n    }\n\n    const transitionEnd = new Promise(resolve => {\n      const listener = event => {\n        if (event.target != el) return;\n        el.removeEventListener('webkitTransitionEnd', listener);\n        el.removeEventListener('transitionend', listener);\n        el.classList.remove(transitionClass);\n        resolve();\n      };\n\n      el.classList.add(transitionClass);\n\n      requestAnimationFrame(() => {\n        el.addEventListener('webkitTransitionEnd', listener);\n        el.addEventListener('transitionend', listener);\n        el.classList[removeClass ? 'remove' : 'add'](className);\n      });\n    });\n\n    const transitionTimeout = new Promise(resolve => setTimeout(resolve, 1000));\n\n    return Promise.race([transitionEnd, transitionTimeout]);\n  }\n}\n\nexport const transitionToClass = transitionClassFunc();\nexport const transitionFromClass = transitionClassFunc({removeClass: true});\n\nexport function loadCss(url) {\n  return new Promise((resolve, reject) => {\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = url;\n\n    link.addEventListener('load', () => resolve());\n    link.addEventListener('error', () => reject());\n\n    document.head.appendChild(link);\n  });\n};\n\nexport function trackFocusMethod() {\n  var focusMethod = 'mouse';\n\n  document.body.addEventListener('focus', event => {\n    event.target.classList.add(focusMethod == 'key' ? 'key-focused' : 'mouse-focused');\n  }, true);\n\n  document.body.addEventListener('blur', event => {\n    event.target.classList.remove('key-focused');\n    event.target.classList.remove('mouse-focused');\n  }, true);\n\n  document.body.addEventListener('keydown', () => {\n    focusMethod = 'key';\n  }, true);\n\n  document.body.addEventListener('mousedown', () => {\n    focusMethod = 'mouse';\n  }, true);\n};\n","export let idbKeyval = (() => {\n  let db;\n\n  function getDB() {\n    if (!db) {\n      db = new Promise((resolve, reject) => {\n        const openreq = indexedDB.open('svgo-keyval', 1);\n\n        openreq.onerror = () => {\n          reject(openreq.error);\n        };\n\n        openreq.onupgradeneeded = () => {\n          // First time setup: create an empty object store\n          openreq.result.createObjectStore('keyval');\n        };\n\n        openreq.onsuccess = () => {\n          resolve(openreq.result);\n        };\n      });\n    }\n    return db;\n  }\n\n  async function withStore(type, callback) {\n    const db = await getDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction('keyval', type);\n      transaction.oncomplete = () => resolve();\n      transaction.onerror = () => reject(transaction.error);\n      callback(transaction.objectStore('keyval'));\n    });\n  }\n\n  return {\n    async get(key) {\n      let req;\n      await withStore('readonly', store => {\n        req = store.get(key);\n      });\n      return req.result;\n    },\n    set(key, value) {\n      return withStore('readwrite', store => {\n        store.put(value, key);\n      });\n    },\n    delete(key) {\n      return withStore('readwrite', store => {\n        store.delete(key);\n      });\n    }\n  };\n})();\n\n// iOS add-to-homescreen is missing IDB, or at least it used to.\n// I haven't tested this in a while.\nif (!self.indexedDB) {\n  idbKeyval = {\n    get: key => Promise.resolve(localStorage.getItem(key)),\n    set: (key, val) => Promise.resolve(localStorage.setItem(key, val)),\n    delete: key => Promise.resolve(localStorage.removeItem(key))\n  };\n}\n","\"use strict\";\n\nexport default class WorkerMessenger {\n  constructor(url) {\n    this._requestId = 0;\n    // worker jobs awaiting response { [requestId]: [ resolve, reject ] }\n    this._pending = {};\n    this._url = url;\n    this._worker = new Worker(this._url);\n    this._worker.onmessage = event => this._onMessage(event);\n  }\n\n  async release() {\n    if (this._worker) {\n      this._worker.terminate();\n      this._worker = null;\n    }\n    for (const key of Object.keys(this._pending)) {\n      this._fulfillPending(key, null, new Error(\"Worker terminated: \" + this._url));\n    }\n  }\n\n  _postMessage(message) {\n    this._worker.postMessage(message);\n  }\n\n  _onMessage(event) {\n    if (!event.data.id) {\n      console.log(\"Unexpected message\", event);\n      return;\n    }\n\n    this._fulfillPending(event.data.id, event.data.result, event.data.error);\n  }\n\n  _fulfillPending(id, result, error) {\n    const resolver = this._pending[id];\n\n    if (!resolver) {\n      console.log(\"No resolver for\", { id, result, error });\n      return;\n    }\n\n    delete this._pending[id];\n\n    if (error) {\n      resolver[1](new Error(error));\n      return;\n    }\n\n    resolver[0](result);\n  }\n\n  _requestResponse(message) {\n    return new Promise((resolve, reject) => {\n      message.id = ++this._requestId;\n      this._pending[message.id] = [resolve, reject];\n      this._postMessage(message);\n    });\n  }\n}\n","import WorkerMessenger from './worker-messenger';\n\nclass Gzip extends WorkerMessenger {\n  constructor() {\n    super('js/gzip-worker.js');\n  }\n\n  compress(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n\nexport const gzip = new Gzip();\n","import { gzip } from './gzip';\n\nexport default class SvgFile {\n  constructor(text, width, height) {\n    this.text = text;\n    this._compressedSize = null;\n    this._url = '';\n    this._blob = null;\n    this.width = width;\n    this.height = height;\n  }\n\n  async size({ compress }) {\n    if (!compress) {\n      return this.text.length;\n    }\n\n    if (!this._compressedSize) {\n      this._compressedSize = gzip.compress(this.text).then(r => r.byteLength);\n    }\n\n    return this._compressedSize;\n  }\n\n  _create() {\n    // IE GCs blobs once they're out of reference, even if they\n    // have an object url, so we have to keep in in reference.\n    this._blob = new Blob([this.text], {type: \"image/svg+xml\"});\n    this._url = URL.createObjectURL(this._blob);\n  }\n\n  get blob() {\n    if (!this._blob) this._create();\n    return this._blob;\n  }\n\n  get url() {\n    if (!this._url) this._create();\n    return this._url;\n  }\n\n  release() {\n    if (!this._url) return;\n\n    this._blob = null;\n    URL.revokeObjectURL(this._url);\n  }\n}\n","function getXY(obj) {\n  return {\n    x: obj.pageX,\n    y: obj.pageY\n  };\n}\n\nfunction touchDistance(touch1, touch2) {\n  const dx = Math.abs(touch2.x - touch1.x);\n  const dy = Math.abs(touch2.y - touch1.y);\n  return Math.sqrt(dx*dx + dy*dy);\n}\n\nfunction getMidpoint(point1, point2) {\n  return {\n    x: (point1.x + point2.x) / 2,\n    y: (point1.y + point2.y) / 2\n  };\n}\n\nfunction getPoints(event) {\n  if (event.touches) {\n    return Array.from(event.touches).map(t => getXY(t));\n  }\n  else {\n    return [getXY(event)];\n  }\n}\n\nexport default class PanZoom {\n  constructor(target, {\n    eventArea = target,\n    shouldCaptureFunc = () => true\n  }={}) {\n    this._target = target;\n    this._shouldCaptureFunc = shouldCaptureFunc;\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._active = 0;\n    this._lastPoints = [];\n\n    // bind\n    [\n      '_onPointerDown',\n      '_onPointerMove',\n      '_onPointerUp'\n    ].forEach(funcName => {\n      this[funcName] = this[funcName].bind(this);\n    })\n\n    // bound events\n    eventArea.addEventListener('mousedown', this._onPointerDown);\n    eventArea.addEventListener('touchstart', this._onPointerDown);\n\n    // unbonud\n    eventArea.addEventListener('wheel', e => this._onWheel(e));\n  }\n\n  reset() {\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._update();\n  }\n\n  _onWheel(event) {\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    const boundingRect = this._target.getBoundingClientRect();\n    let delta = event.deltaY;\n\n    if (event.deltaMode === 1) { // 1 is \"lines\", 0 is \"pixels\"\n      // Firefox uses \"lines\" when mouse is connected\n      delta *= 15;\n    }\n\n    // stop mouse wheel producing huge values\n    delta = Math.max(Math.min(delta, 60), -60);\n\n    const scaleDiff = (delta / 300) + 1;\n\n    // avoid to-small values\n    if (this._scale * scaleDiff < 0.05) return;\n\n    this._scale *= scaleDiff;\n    this._dx -= (event.pageX - boundingRect.left) * (scaleDiff - 1);\n    this._dy -= (event.pageY - boundingRect.top) * (scaleDiff - 1);\n    this._update();\n  }\n\n  _onFirstPointerDown(event) {\n    document.addEventListener('mousemove', this._onPointerMove);\n    document.addEventListener('mouseup', this._onPointerUp);\n    document.addEventListener('touchmove', this._onPointerMove);\n    document.addEventListener('touchend', this._onPointerUp);\n  }\n\n  _onPointerDown(event) {\n    if (event.type == 'mousedown' && event.which != 1) return;\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    this._lastPoints = getPoints(event);\n    this._active++;\n\n    if (this._active === 1) {\n      this._onFirstPointerDown(event);\n    }\n  }\n\n  _onPointerMove(event) {\n    event.preventDefault();\n    const points = getPoints(event);\n    const averagePoint = points.reduce(getMidpoint);\n    const averageLastPoint = this._lastPoints.reduce(getMidpoint);\n    const boundingRect = this._target.getBoundingClientRect();\n\n    this._dx += averagePoint.x - averageLastPoint.x;\n    this._dy += averagePoint.y - averageLastPoint.y;\n\n    if (points[1]) {\n      const scaleDiff = touchDistance(points[0], points[1]) / touchDistance(this._lastPoints[0], this._lastPoints[1]);\n      this._scale *= scaleDiff;\n      this._dx -= (averagePoint.x - boundingRect.left) * (scaleDiff - 1);\n      this._dy -= (averagePoint.y - boundingRect.top) * (scaleDiff - 1);\n    }\n\n    this._update();\n    this._lastPoints = points;\n  }\n\n  _update() {\n    this._target.style.WebkitTransform = this._target.style.transform\n      = `translate3d(${this._dx}px, ${this._dy}px, 0) scale(${this._scale})`;\n  }\n\n  _onPointerUp(event) {\n    event.preventDefault();\n    this._active--;\n    this._lastPoints.pop();\n\n    if (this._active) {\n      this._lastPoints = getPoints(event);\n      return;\n    }\n\n    document.removeEventListener('mousemove', this._onPointerMove);\n    document.removeEventListener('mouseup', this._onPointerUp);\n    document.removeEventListener('touchmove', this._onPointerMove);\n    document.removeEventListener('touchend', this._onPointerUp);\n  }\n}\n","import { domReady, strToEl } from '../utils';\nimport PanZoom from './pan-zoom';\n\nexport default class SvgOutput {\n  constructor() {\n    this.container = strToEl(\n      '<div class=\"svg-output\">' +\n        '<div class=\"svg-container\">' +\n          '<iframe class=\"svg-frame\" sandbox=\"allow-scripts\"></iframe>' +\n        '</div>' +\n        // Stop touches going into the iframe.\n        // pointer-events + touch + iframe doesn't work in Chrome :(\n        '<div class=\"svg-clickjacker\"></div>' +\n      '</div>' +\n    '');\n\n\n    this._svgFrame = this.container.querySelector('.svg-frame');\n    this._svgFrame.scrolling = 'no';\n\n    this._svgContainer = this.container.querySelector('.svg-container');\n\n    domReady.then(() => {\n      this._panZoom = new PanZoom(this._svgContainer, {\n        eventArea: this.container\n      });\n    });\n  }\n\n  setSvg(svgFile) {\n    // I would rather use blob urls, but they don't work in Firefox\n    // All the internal refs break.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1125667\n    const nextLoad = this._nextLoadPromise();\n    this._svgFrame.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svgFile.text);\n    this._svgFrame.width = svgFile.width;\n    this._svgFrame.height = svgFile.height;\n    return nextLoad;\n  }\n\n  reset() {\n    this._svgFrame.src = \"about:blank\";\n    this._panZoom.reset();\n  }\n\n  _nextLoadPromise() {\n    return new Promise(resolve => {\n      const onload = () => {\n        this._svgFrame.removeEventListener('load', onload);\n        resolve();\n      }\n      this._svgFrame.addEventListener('load', onload);\n    });\n  }\n}\n","import { strToEl } from '../utils';\nimport Prism from '../prism';\nconst prism = new Prism();\n\nexport default class CodeOutput {\n  constructor() {\n    this.container = strToEl(\n      '<div class=\"code-output\">' +\n        '<pre><code></code></pre>' +\n      '</div>' +\n    '');\n    this._codeEl = this.container.querySelector('code');\n  }\n\n  async setSvg(svgFile) {\n    this._codeEl.innerHTML = await prism.highlight(svgFile.text);\n  }\n\n  reset() {\n    this._codeEl.innerHTML = '';\n  }\n}\n","import WorkerMessenger from './worker-messenger';\n\nexport default class Prism extends WorkerMessenger {\n  constructor() {\n    super('js/prism-worker.js');\n  }\n\n  highlight(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n","import { strToEl, transitionToClass, transitionFromClass } from '../utils';\nimport SvgOutput from './svg-output';\nimport CodeOutput from './code-output';\n\nexport default class Output {\n  constructor() {\n    this.container = strToEl(\n      '<div class=\"output-switcher\"></div>' +\n    '');\n\n    this._types = {\n      image: new SvgOutput(),\n      code: new CodeOutput()\n    };\n\n    this._svgFile = null;\n    this._switchQueue = Promise.resolve();\n    this.set('image', {noAnimate: true});\n  }\n\n  update(svgFile) {\n    this._svgFile = svgFile;\n    return this._types[this._activeType].setSvg(svgFile);\n  }\n\n  reset() {\n    this._types[this._activeType].reset();\n  }\n\n  set(type, {\n    noAnimate = false\n  }={}) {\n    return this._switchQueue = this._switchQueue.then(async () => {\n      const toRemove = this._activeType && this._types[this._activeType].container;\n\n      this._activeType = type;\n      const toAdd = this._types[this._activeType].container;\n      this.container.appendChild(toAdd);\n\n      if (this._svgFile) await this.update(this._svgFile);\n\n      if (noAnimate) {\n        toAdd.classList.add('active');\n        if (toRemove) toRemove.classList.remove('active');\n      }\n      else {\n        const transitions = [\n          transitionToClass(toAdd)\n        ];\n\n        if (toRemove) transitions.push(transitionFromClass(toRemove));\n\n        await Promise.all(transitions);\n      }\n\n      if (toRemove) this.container.removeChild(toRemove);\n    })\n  }\n}\n","import { strToEl } from '../utils';\n\nexport default class Ripple {\n  constructor() {\n    this.container = strToEl('<div class=\"ripple\"></div>');\n  }\n\n  animate() {\n    this.container.classList.remove('animate');\n    this.container.offsetLeft;\n    this.container.classList.add('animate');\n  }\n}\n","import { strToEl } from '../utils';\n\nexport default class Spinner {\n  constructor() {\n    this.container = strToEl(\n      '<div class=\"spinner\">' +\n        '<div class=\"spinner-container\">' +\n          '<div class=\"spinner-layer\">' +\n            '<div class=\"circle-clipper left\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"gap-patch\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"circle-clipper right\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>' +\n    '');\n\n    this._showTimeout = null;\n    this.container.style.display = 'none';\n\n    const animEndListener = event => {\n      if (event.target == this.container) {\n        this.container.style.display = 'none';\n      }\n    };\n\n    this.container.addEventListener('webkitAnimationEnd', animEndListener);\n    this.container.addEventListener('animationend', animEndListener);\n  }\n\n  show(delay = 300) {\n    clearTimeout(this._showTimeout);\n    this.container.style.display = 'none';\n    this.container.classList.remove('cooldown');\n    this._showTimeout = setTimeout(() => {\n      this.container.style.display = '';\n    }, delay);\n  }\n\n  hide() {\n    clearTimeout(this._showTimeout);\n    this.container.classList.add('cooldown');\n  }\n}\n","import { strToEl } from '../utils';\nimport Ripple from './ripple';\nimport Spinner from './spinner';\n\nexport default class FloatingActionButton {\n  constructor({ title, href, iconSvg, classList, minor }) {\n    this.container = strToEl(\n      (href ? '<a>' : '<div role=\"button\" tabindex=\"0\">') +\n        iconSvg +\n      (href ? '</a>' : '</div>') +\n    '');\n\n    if (href) {\n      this.container.href = href;\n    }\n    if (title) {\n      this.container.setAttribute('title', title);\n    }\n    this.container.classList.add(minor ? 'minor-floating-action-button' : 'floating-action-button');\n    if (classList) {\n      classList.forEach((className) => { this.container.classList.add(className); });\n    }\n\n    this._ripple = new Ripple();\n    this.container.appendChild(this._ripple.container);\n\n    this._spinner = new Spinner();\n    this.container.appendChild(this._spinner.container);\n\n    this.container.addEventListener('click', event => this._onClick(event));\n  }\n\n  _onClick(event) {\n    this._ripple.animate();\n  }\n\n  working() {\n    this._spinner.show(500);\n  }\n\n  done() {\n    this._spinner.hide();\n  }\n}\n","import FloatingActionButton from './floating-action-button';\n\nexport default class DownloadButton extends FloatingActionButton {\n  constructor() {\n    const title = 'Download';\n\n    super({\n      title,\n      href: './',\n      iconSvg: (\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          `<title>${title}</title>` +\n          '<path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/>' +\n        '</svg>'\n      )\n    });\n\n    this._svgFile = null;\n  }\n\n  _onClick(event) {\n    super._onClick(event);\n\n    // IE compat\n    if ('msSaveBlob' in navigator) {\n      event.preventDefault();\n      navigator.msSaveBlob(this._svgFile.blob, this._svgFile.filename);\n    }\n  }\n\n  setDownload(filename, svgFile) {\n    this.container.download = filename;\n    this.container.href = svgFile.url;\n\n    // for IE compat\n    this._svgFile = svgFile;\n  }\n}\n","import FloatingActionButton from './floating-action-button';\n\nexport const copySupported = (document.queryCommandSupported && document.queryCommandSupported('copy'));\n\nexport default class CopyButton extends FloatingActionButton {\n  constructor() {\n    const title = 'Copy as text';\n\n    super({\n      title,\n      iconSvg: (\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          `<title>${title}</title>` +\n          '<path d=\"M16 1H4C3 1 2 2 2 3v14h2V3h12V1zm3 4H8C7 5 6 6 6 7v14c0 1 1 2 2 2h11c1 0 2-1 2-2V7c0-1-1-2-2-2zm0 16H8V7h11v14z\"/>' +\n        '</svg>'\n      ),\n      minor: true\n    });\n\n    this._text = null;\n    this._pre = document.createElement('pre');\n  }\n\n  _onClick(event) {\n    super._onClick(event);\n    this._pre.textContent = this._text;\n    document.body.appendChild(this._pre);\n    getSelection().removeAllRanges();\n\n    const range = document.createRange();\n    range.selectNode(this._pre);\n\n    window.getSelection().addRange(range);\n\n    document.execCommand('copy');\n    getSelection().removeAllRanges();\n    document.body.removeChild(this._pre);\n  }\n\n  setCopyText(text, filename) {\n    this._text = text;\n  }\n}\n","import FloatingActionButton from './floating-action-button';\n\nexport default class BgFillButton extends FloatingActionButton {\n  constructor() {\n    const title = 'Preview on vivid background';\n\n    super({\n      title,\n      iconSvg: (\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          `<title>${title}</title>` +\n          '<path d=\"M21.143 9.667c-.733-1.392-1.914-3.05-3.617-4.753-2.977-2.978-5.478-3.914-6.785-3.914-.414 0-.708.094-.86.246l-1.361 1.36c-1.899-.236-3.42.106-4.294.983-.876.875-1.164 2.159-.792 3.523.492 1.806 2.305 4.049 5.905 5.375.038.323.157.638.405.885.588.588 1.535.586 2.121 0s.588-1.533.002-2.119c-.588-.587-1.537-.588-2.123-.001l-.17.256c-2.031-.765-3.395-1.828-4.232-2.9l3.879-3.875c.496 2.73 6.432 8.676 9.178 9.178l-7.115 7.107c-.234.153-2.798-.316-6.156-3.675-3.393-3.393-3.175-5.271-3.027-5.498l1.859-1.856c-.439-.359-.925-1.103-1.141-1.689l-2.134 2.131c-.445.446-.685 1.064-.685 1.82 0 1.634 1.121 3.915 3.713 6.506 2.764 2.764 5.58 4.243 7.432 4.243.648 0 1.18-.195 1.547-.562l8.086-8.078c.91.874-.778 3.538-.778 4.648 0 1.104.896 1.999 2 1.999 1.105 0 2-.896 2-2 0-3.184-1.425-6.81-2.857-9.34zm-16.209-5.371c.527-.53 1.471-.791 2.656-.761l-3.209 3.206c-.236-.978-.049-1.845.553-2.445zm9.292 4.079l-.03-.029c-1.292-1.292-3.803-4.356-3.096-5.063.715-.715 3.488 1.521 5.062 3.096.862.862 2.088 2.247 2.937 3.458-1.717-1.074-3.491-1.469-4.873-1.462z\"/>' +\n        '</svg>'\n      ),\n      classList: [ 'fillAB' ],\n      minor: true\n    });\n  }\n\n  _onClick(event) {\n    super._onClick(event);\n    // event adds a background color\n    if (this.container.classList.contains('active')) {\n      this.container.classList.remove('active');\n      this.setColor('transparent');\n    }\n    else {\n      this.container.classList.add('active');\n      this.setColor('rgba(0, 0, 0, 0.7)');\n    }\n  }\n\n  setColor(color) {\n    document.documentElement.style.backgroundColor = color;\n  }\n}\n","import { strToEl } from '../utils';\n\nfunction round(num, places) {\n  const mult = Math.pow(10, places);\n  return Math.floor(Math.round(num * mult)) / mult;\n}\n\nfunction humanSize(bytes) {\n  if (bytes < 1024) {\n    return bytes + ' bytes';\n  }\n  else {\n    return round(bytes / 1024, 2) + 'k';\n  }\n}\n\nexport default class Results {\n  constructor() {\n    this.container = strToEl(\n      '<div class=\"results\">' +\n        '<span class=\"size\"></span> ' +\n        '<span class=\"diff\"></span>' +\n      '</div>' +\n    '');\n\n    this._sizeEl = this.container.querySelector('.size');\n    this._newSizeEl = this.container.querySelector('.newSize');\n    this._diffEl = this.container.querySelector('.diff');\n  }\n\n  update({ size, comparisonSize }) {\n    if (comparisonSize) {\n      this._sizeEl.textContent = humanSize(comparisonSize) + ' â†’ ' + humanSize(size);\n    } else {\n      this._sizeEl.textContent = humanSize(size);\n    }\n\n    this._diffEl.classList.remove('decrease', 'increase');\n\n    // just displaying a single size?\n    if (!comparisonSize) {\n      this._diffEl.textContent = '';\n      return;\n    }\n    else if (size === comparisonSize) {\n      this._diffEl.textContent = '100%';\n    }\n    else {\n      this._diffEl.textContent = round(size / comparisonSize * 100, 2) + '%';\n      this._diffEl.classList.add(size > comparisonSize ? 'increase' : 'decrease');\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","import { strToEl } from '../utils';\n\nexport default class MaterialSlider {\n  constructor(rangeEl) {\n    this.container = strToEl(`\n      <div class=\"material-slider\">\n        <div class=\"track\">\n          <div class=\"track-on\"></div>\n          <div class=\"handle\">\n            <div class=\"arrow\"></div>\n            <div class=\"val\"></div>\n          </div>\n        </div>\n      </div>\n    `);\n\n    this.range = rangeEl;\n    this._handle = this.container.querySelector('.handle');\n    this._trackOn = this.container.querySelector('.track-on');\n    this._val = this.container.querySelector('.val');\n\n    rangeEl.parentNode.insertBefore(this.container, rangeEl);\n    this.container.insertBefore(rangeEl, this.container.firstChild);\n\n    rangeEl.addEventListener('input', () => this._onInputChange());\n    this.range.addEventListener('mousedown', () => this._onRangeMouseDown());\n    this.range.addEventListener('touchstart', () => this._onRangeTouchStart());\n    this.range.addEventListener('touchend', () => this._onRangeTouchEnd());\n\n    this._setPosition();\n  }\n\n  _onRangeTouchStart() {\n    this.range.focus();\n  }\n\n  _onRangeTouchEnd() {\n    this.range.blur();\n  }\n\n  _onRangeMouseDown() {\n    this.range.classList.add('active');\n\n    const upListener = e => {\n      // IE requires me to do this. Pah.\n      requestAnimationFrame(_ => {\n        this.range.blur();\n      })\n      this.range.classList.remove('active');\n      document.removeEventListener('mouseup', upListener);\n    }\n    document.addEventListener('mouseup', upListener);\n  }\n\n  set value(newVal) {\n    this.range.value = newVal;\n    this._update();\n  }\n\n  _onInputChange() {\n    this._update();\n  }\n\n  _update() {\n    requestAnimationFrame(() => this._setPosition());\n  }\n\n  _setPosition() {\n    const { min, max, value } = this.range;\n    const percent = (Number(value) - min) / (max - min);\n\n    this._trackOn.style.width =\n      this._handle.style.left = percent * 100 + \"%\";\n\n    this._val.textContent = value;\n  }\n}\n","import { EventEmitter } from 'events';\n\nimport { domReady } from '../utils';\nimport MaterialSlider from './material-slider';\nimport Ripple from './ripple';\n\nexport default class Settings extends EventEmitter {\n  constructor() {\n    super();\n\n    this._throttleTimeout = null;\n\n    domReady.then(() => {\n      this._pluginInputs = Array.from(\n        document.querySelectorAll('.settings .plugins input')\n      );\n      this._globalInputs = Array.from(\n        document.querySelectorAll('.settings .global input')\n      );\n\n      this._resetRipple = new Ripple();\n      this._resetBtn = document.querySelector('.setting-reset');\n      this._resetBtn.appendChild(this._resetRipple.container);\n\n      // map real range elements to Slider instances\n      this._sliderMap = new WeakMap();\n\n      // enhance ranges\n      Array.from(\n        document.querySelectorAll('.settings input[type=range]')\n      ).forEach(el => this._sliderMap.set(el, new MaterialSlider(el)));\n\n      this.container = document.querySelector('.settings');\n      this._scroller = document.querySelector('.settings-scroller');\n\n      this.container.addEventListener('change', e => this._onChange(e));\n      this.container.addEventListener('input', e => this._onChange(e));\n      this._scroller.addEventListener('wheel', e => this._onMouseWheel(e));\n      this._resetBtn.addEventListener('click', e => this._onReset(e));\n\n      // Stop double-tap text selection.\n      // This stops all text selection which is kinda sad.\n      // I think this code will bite me.\n      this._scroller.addEventListener('mousedown', e => {\n        if (e.target.closest('input[type=range]')) return;\n        e.preventDefault();\n      });\n    });\n  }\n\n  _onMouseWheel(event) {\n    // Prevents bounce effect on desktop.\n    // Firefox uses DELTA_LINE on a mouse wheel, ignore it\n    if (!event.deltaMode) { // 0 is \"pixels\"\n      event.preventDefault();\n      event.currentTarget.scrollTop += event.deltaY;\n    }\n  }\n\n  _onChange(event) {\n    clearTimeout(this._throttleTimeout);\n\n    // throttle range\n    if (event.target.type == 'range') {\n      this._throttleTimeout = setTimeout(() => this.emit('change'), 150);\n    }\n    else {\n      this.emit('change');\n    }\n  }\n\n  _onReset() {\n    this._resetRipple.animate();\n    const oldSettings = this.getSettings();\n    // Set all inputs according to their initial attributes\n    for (const inputEl of this._globalInputs) {\n      if (inputEl.type == 'checkbox') {\n        inputEl.checked = inputEl.hasAttribute('checked');\n      }\n      else if (inputEl.type == 'range') {\n        this._sliderMap.get(inputEl).value = inputEl.getAttribute('value');\n      }\n    }\n\n    for (const inputEl of this._pluginInputs) {\n      inputEl.checked = inputEl.hasAttribute('checked');\n    }\n\n    this.emit('reset', oldSettings);\n    this.emit('change');\n  }\n\n  setSettings(settings) {\n    for (const inputEl of this._globalInputs) {\n      if (!(inputEl.name in settings)) continue;\n\n      if (inputEl.type == 'checkbox') {\n        inputEl.checked = settings[inputEl.name];\n      }\n      else if (inputEl.type == 'range') {\n        this._sliderMap.get(inputEl).value = settings[inputEl.name];\n      }\n    }\n\n    for (const inputEl of this._pluginInputs) {\n      if (!(inputEl.name in settings.plugins)) continue;\n      inputEl.checked = settings.plugins[inputEl.name];\n    }\n  }\n\n  getSettings() {\n    // fingerprint is used for cache lookups\n    const fingerprint = [];\n\n    const output = {\n      plugins: {}\n    };\n\n    this._globalInputs.forEach(inputEl => {\n      if (inputEl.name != 'gzip' && inputEl.name != 'original') {\n        if (inputEl.type == 'checkbox') {\n          fingerprint.push(Number(inputEl.checked));\n        }\n        else {\n          fingerprint.push('|' + inputEl.value + '|');\n        }\n      }\n\n      if (inputEl.type == 'checkbox') {\n        output[inputEl.name] = inputEl.checked;\n      }\n      else {\n        output[inputEl.name] = inputEl.value;\n      }\n    });\n\n    this._pluginInputs.forEach(inputEl => {\n      fingerprint.push(Number(inputEl.checked));\n      output.plugins[inputEl.name] = inputEl.checked;\n    });\n\n    output.fingerprint = fingerprint.join();\n\n    return output;\n  }\n}\n","import {\n  domReady,\n  transitionFromClass,\n  transitionToClass,\n  readFileAsText\n} from '../utils';\nimport Spinner from './spinner';\nimport { EventEmitter } from 'events';\n\nexport default class MainMenu extends EventEmitter {\n  constructor() {\n    super();\n\n    this.allowHide = false;\n    this._spinner = new Spinner();\n\n    domReady.then(() => {\n      this.container = document.querySelector('.main-menu');\n      this._loadFileInput = document.querySelector('.load-file-input');\n      this._pasteInput = document.querySelector('.paste-input');\n      this._loadDemoBtn = document.querySelector('.load-demo');\n      this._loadFileBtn = document.querySelector('.load-file');\n      this._pasteLabel = document.querySelector('.menu-input');\n      this._overlay = this.container.querySelector('.overlay');\n      this._menu = this.container.querySelector('.menu');\n\n      document.querySelector('.menu-btn')\n        .addEventListener('click', e => this._onMenuButtonClick(e));\n\n      this._overlay.addEventListener('click', e => this._onOverlayClick(e));\n\n      this._loadFileBtn.addEventListener('click', e => this._onLoadFileClick(e));\n      this._loadDemoBtn.addEventListener('click', e => this._onLoadDemoClick(e));\n      this._loadFileInput.addEventListener('change', e => this._onFileInputChange(e));\n      this._pasteInput.addEventListener('input', e => this._onTextInputChange(e));\n    });\n  }\n\n  show() {\n    this.container.classList.remove('hidden');\n    transitionFromClass(this._overlay, 'hidden');\n    transitionFromClass(this._menu, 'hidden');\n  }\n\n  hide() {\n    if (!this.allowHide) return;\n    this.stopSpinner();\n    this.container.classList.add('hidden');\n    transitionToClass(this._overlay, 'hidden');\n    transitionToClass(this._menu, 'hidden');\n  }\n\n  stopSpinner() {\n    this._spinner.hide();\n  }\n\n  showFilePicker() {\n    this._loadFileInput.click();\n  }\n\n  _onOverlayClick(event) {\n    event.preventDefault();\n    this.hide();\n  }\n\n  _onMenuButtonClick(event) {\n    event.preventDefault();\n    this.show();\n  }\n\n  _onTextInputChange(event) {\n    const val = this._pasteInput.value.trim();\n\n    if (val.includes('</svg>')) {\n      this._pasteInput.value = '';\n      this._pasteInput.blur();\n\n      this._pasteLabel.appendChild(this._spinner.container);\n      this._spinner.show();\n\n      this.emit('svgDataLoad', {\n        data: val,\n        filename: 'image.svg'\n      });\n    }\n  }\n\n  _onLoadFileClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this.showFilePicker();\n  }\n\n  async _onFileInputChange(event) {\n    const file = this._loadFileInput.files[0];\n\n    if (!file) return;\n\n    this._loadFileBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    this.emit('svgDataLoad', {\n      data: await readFileAsText(file),\n      filename: file.name\n    });\n  }\n\n  async _onLoadDemoClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this._loadDemoBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    try {\n      this.emit('svgDataLoad', {\n        data: await fetch('test-svgs/car-lite.svg').then(r => r.text()),\n        filename: 'car-lite.svg'\n      });\n    }\n    catch (err) {\n      // This extra scope is working around a babel-minify bug.\n      // It's fixed in Babel 7.\n      {\n        this.stopSpinner();\n\n        let error;\n\n        if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n          error = Error(\"Demo not available offline\");\n        }\n        else {\n          error = Error(\"Couldn't fetch demo SVG\");\n        }\n\n        this.emit('error', { error });\n      }\n    }\n  }\n}\n","import { strToEl, transitionToClass } from '../utils';\n\nclass Toast {\n  constructor(message, duration, buttons) {\n    this.container = strToEl(\n      '<div class=\"toast\"><div class=\"toast-content\"></div></div>' +\n    '');\n\n    this._content = this.container.querySelector('.toast-content');\n    this._content.textContent = message;\n    this._answerResolve;\n    this._hideTimeout;\n\n    this.answer = new Promise(r => this._answerResolve = r);\n\n    buttons.forEach(button => {\n      var buttonEl = document.createElement('button');\n      buttonEl.className = 'unbutton';\n      buttonEl.textContent = button;\n      buttonEl.addEventListener('click', () => {\n        this._answerResolve(button);\n      });\n      this.container.appendChild(buttonEl);\n    });\n\n    if (duration) {\n      this._hideTimeout = setTimeout(() => this.hide(), duration);\n    }\n  }\n\n  hide() {\n    clearTimeout(this._hideTimeout);\n    this._answerResolve();\n    return transitionToClass(this.container, 'hide');\n  }\n}\n\nexport default class Toasts {\n  constructor() {\n    this.container = strToEl(\"<div class='toasts'></div>\");\n  }\n\n  show(message, {\n    duration = 0,\n    buttons = ['dismiss']\n  }={}) {\n    const toast = new Toast(message, duration, buttons);\n    this.container.appendChild(toast.container);\n\n    toast.answer.then(() => toast.hide()).then(() => {\n      this.container.removeChild(toast.container);\n    });\n\n    return toast;\n  }\n}\n","import {\n  strToEl,\n  domReady,\n  transitionToClass,\n  transitionFromClass,\n  readFileAsText\n} from '../utils';\nimport { EventEmitter } from 'events';\n\nexport default class FileDrop extends EventEmitter {\n  constructor() {\n    super();\n    this.container = strToEl(\n      '<div class=\"drop-overlay\">Drop it!</div>' +\n    '');\n\n    // drag events are horrid\n    this._activeEnters = 0;\n    this._currentEnteredElement = null;\n\n    domReady.then(_ => {\n      document.addEventListener('dragover', event => event.preventDefault());\n      document.addEventListener('dragenter', event => this._onDragEnter(event));\n      document.addEventListener('dragleave', event => this._onDragLeave(event));\n      document.addEventListener('drop', event => this._onDrop(event));\n    });\n  }\n\n  _onDragEnter(event) {\n    // firefox double-fires on window enter, this works around it\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1124645\n    if (this._currentEnteredElement == event.target) return;\n    this._currentEnteredElement = event.target;\n\n    if (!this._activeEnters++) {\n      transitionToClass(this.container);\n    }\n  }\n\n  _onDragLeave(event) {\n    this._currentEnteredElement = null;\n\n    if (!--this._activeEnters) {\n      transitionFromClass(this.container);\n    }\n  }\n\n  async _onDrop(event) {\n    event.preventDefault();\n\n    this._activeEnters = 0;\n    transitionFromClass(this.container);\n\n    const file = event.dataTransfer.files[0];\n    if (!file) return;\n\n    this.emit('svgDataLoad', {\n      data: await readFileAsText(file),\n      filename: file.name\n    });\n  }\n}\n","import { domReady, transitionFromClass } from '../utils';\n\nexport default class Preloader {\n  constructor() {\n    domReady.then(_ => {\n      this.container = document.querySelector('.preloader');\n      this.activated = this.container.classList.contains('active');\n      this.hide();\n    });\n  }\n\n  async hide() {\n    await transitionFromClass(this.container, 'active');\n    this.container.style.display = 'none';\n  }\n}\n","import { strToEl, escapeHtmlTag, transitionToClass, domReady } from '../utils';\n\nexport default class Changelog {\n  constructor(loadedVersion) {\n    this.container = strToEl('<section class=\"changelog\"></section>');\n    this._loadedVersion = loadedVersion;\n  }\n\n  async showLogFrom(lastLoadedVersion) {\n    if (lastLoadedVersion == this._loadedVersion) return;\n    const changelog = await fetch('changelog.json').then(r => r.json());\n    let startIndex = 0;\n    let endIndex = 0;\n\n    for (var i = 0; i < changelog.length; i++) {\n      const entry = changelog[i];\n\n      if (entry.version === this._loadedVersion) {\n        startIndex = i;\n      }\n      else if (entry.version === lastLoadedVersion) {\n        break;\n      }\n      endIndex = i + 1;\n    }\n\n    const changeLis = changelog.slice(startIndex, endIndex)\n      .reduce((arr, entry) => arr.concat(entry.changes), [])\n      .map(change => escapeHtmlTag`<li>${change}</li>`);\n\n    this.container.appendChild(strToEl('<h1>Updated!</h1>'));\n    this.container.appendChild(strToEl(\n      '<ul>' +\n        changeLis.join('') +\n      '</ul>' +\n    ''));\n\n    await domReady;\n    transitionToClass(this.container);\n  }\n}\n","import { domReady } from '../utils';\n\nexport default class ResultsContainer {\n  constructor(results) {\n    this._results = results;\n\n    domReady.then(_ => {\n      this._mobileContainer = document.querySelector('.results-container-mobile');\n      this._container = document.querySelector('.results-container');\n      this._query = matchMedia('(min-width: 640px)');\n\n      this._query.addListener(() => this._positionResults());\n      this._positionResults();\n    });\n  }\n\n  _positionResults() {\n    if (this._query.matches) {\n      this._container.appendChild(this._results.container);\n    }\n    else {\n      this._mobileContainer.appendChild(this._results.container);\n    }\n  }\n}\n","import { EventEmitter } from 'events';\nimport { domReady } from '../utils';\n\n/**\n * Tabs that toggle between showing the SVG image and XML markup.\n */\nexport default class ViewToggler extends EventEmitter {\n  constructor() {\n    super();\n    /** @type {HTMLFormElement | null} */\n    this.container = null;\n\n    domReady.then(() => {\n      this.container = document.querySelector('.view-toggler');\n\n      // stop browsers remembering previous form state\n      this.container.output[0].checked = true;\n\n      this.container.addEventListener('change', e => this._onChange(e));\n    });\n  }\n\n  _onChange(event) {\n    let value = this.container.output.value;\n\n    if (!value) { // some browsers don't support the nice shortcut above (eg Safari)\n      value = Array.from(this.container.output).reduce((value, input) => {\n        return value || (input.checked ? input.value : '');\n      }, '');\n    }\n\n    this.emit(\"change\", { value });\n  }\n}\n","export default class ResultsCache {\n  constructor(size) {\n    this._size = size;\n    this.purge();\n  }\n\n  purge() {\n    this._fingerprints = [];\n    this._items = [];\n    this._index = 0;\n  }\n\n  add(fingerprint, svgFile) {\n    const oldItem = this._items[this._index];\n\n    if (oldItem) {\n      // gc blob url\n      oldItem.release();\n    }\n\n    this._fingerprints[this._index] = fingerprint;\n    this._items[this._index] = svgFile;\n\n    this._index = (this._index + 1) % this._size;\n  }\n\n  match(fingerprint) {\n    return this._items[this._fingerprints.indexOf(fingerprint)];\n  }\n}\n","import { transitionToClass } from '../utils';\n\nexport default class MainUi {\n  constructor(...elements) {\n    this._activated = false;\n    this._toActivate = elements;\n  }\n\n  activate() {\n    if (this._activated) return;\n    this._activated = true;\n\n    return Promise.all(\n      this._toActivate.map(el => transitionToClass(el))\n    );\n  }\n}\n","import { idbKeyval as storage } from '../utils/storage';\nimport Svgo from './svgo';\nimport { domReady } from './utils';\nimport Output from './ui/output';\nimport DownloadButton from './ui/download-button';\nimport CopyButton from './ui/copy-button';\nimport { copySupported } from './ui/copy-button';\nimport BgFillButton from './ui/bg-fill-button';\nimport Results from './ui/results';\nimport Settings from './ui/settings';\nimport MainMenu from './ui/main-menu';\nimport Toasts from './ui/toasts';\nimport FileDrop from './ui/file-drop';\nimport Preloader from './ui/preloader';\nimport Changelog from './ui/changelog';\nimport ResultsContainer from './ui/results-container';\nimport ViewToggler from './ui/view-toggler';\nimport ResultsCache from './results-cache';\nimport MainUi from './ui/main-ui';\n\nconst svgo = new Svgo();\n\nexport default class MainController {\n  constructor() {\n    this._container = null;\n\n    // ui components\n    this._mainUi = null;\n    this._outputUi = new Output();\n    this._downloadButtonUi = new DownloadButton();\n    this._copyButtonUi = new CopyButton();\n    this._bgFillUi = new BgFillButton();\n    this._resultsUi = new Results();\n    this._settingsUi = new Settings();\n    this._mainMenuUi = new MainMenu();\n    this._toastsUi = new Toasts();\n    this._dropUi = new FileDrop();\n    this._preloaderUi = new Preloader();\n    this._changelogUi = new Changelog(self.version);\n    this._resultsContainerUi = new ResultsContainer(this._resultsUi);\n    this._viewTogglerUi = new ViewToggler();\n\n    // ui events\n    this._settingsUi.on('change', () => this._onSettingsChange());\n    this._settingsUi.on('reset', oldSettings => this._onSettingsReset(oldSettings));\n    this._mainMenuUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._dropUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._mainMenuUi.on('error', ({error}) => this._handleError(error));\n    this._viewTogglerUi.on('change', e => this._onViewSelectionChange(e));\n    window.addEventListener('keydown', e => this._onGlobalKeyDown(e));\n\n    // state\n    this._inputItem = null;\n    this._cache = new ResultsCache(10);\n    this._latestCompressJobId = 0;\n    this._userHasInteracted = false;\n    this._reloading = false;\n\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('sw.js', {\n        scope: './'\n      }).then(registration => {\n        registration.addEventListener('updatefound', () => this._onUpdateFound(registration));\n      });\n    }\n\n    // tell the user about the latest update\n    storage.get('last-seen-version').then(lastSeenVersion => {\n      if (lastSeenVersion) {\n        this._changelogUi.showLogFrom(lastSeenVersion);\n      }\n      storage.set('last-seen-version', self.version);\n    });\n\n    domReady.then(() => {\n      this._container = document.querySelector('.app-output');\n\n      // elements for intro anim\n      this._mainUi = new MainUi(\n        document.querySelector('.toolbar'),\n        document.querySelector('.action-button-container'),\n        this._outputUi.container,\n        this._settingsUi.container\n      );\n\n      const actionContainer = document.querySelector('.action-button-container');\n      const minorActionContainer = document.querySelector('.minor-action-container');\n\n      minorActionContainer.appendChild(this._bgFillUi.container);\n\n      if (copySupported) {\n        minorActionContainer.appendChild(this._copyButtonUi.container);\n      }\n\n      actionContainer.appendChild(this._downloadButtonUi.container);\n\n      document.querySelector('.output').appendChild(this._outputUi.container);\n      this._container.appendChild(this._toastsUi.container);\n      this._container.appendChild(this._dropUi.container);\n      document.querySelector('.menu-extra').appendChild(this._changelogUi.container);\n\n      // load previous settings\n      this._loadSettings();\n\n      // someone managed to hit the preloader, aww\n      if (this._preloaderUi.activated) {\n        this._toastsUi.show(\"Ready now!\", {\n          duration: 3000\n        });\n      }\n\n      // for testing\n      if (false) {\n        (async () => {\n          this._onInputChange({\n            data: await fetch('test-svgs/car-lite.svg').then(r => r.text()),\n            filename: 'car-lite.svg'\n          });\n        })();\n      }\n    });\n  }\n\n  _onGlobalKeyDown(event) {\n    if (event.key === 'o' && (event.ctrlKey || event.metaKey)) {\n      event.preventDefault();\n      this._mainMenuUi.showFilePicker();\n    }\n  }\n\n  _onViewSelectionChange(event) {\n    this._outputUi.set(event.value);\n  }\n\n  _onUpdateFound(registration) {\n    const newWorker = registration.installing;\n\n    registration.installing.addEventListener('statechange', async () => {\n      if (this._reloading) return;\n\n      // the very first activation!\n      // tell the user stuff works offline\n      if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {\n        this._toastsUi.show(\"Ready to work offline\", {\n          duration: 5000\n        });\n        return;\n      }\n\n      if (newWorker.state == 'activated' && navigator.serviceWorker.controller) {\n        // if the user hasn't interacted yet, do a sneaky reload\n        if (!this._userHasInteracted) {\n          this._reloading = true;\n          location.reload();\n          return;\n        }\n\n        // otherwise, show the user an alert\n        const toast = this._toastsUi.show(\"Update available\", {\n          buttons: ['reload', 'dismiss']\n        });\n\n        const answer = await toast.answer;\n\n        if (answer == 'reload') {\n          this._reloading = true;\n          location.reload();\n        }\n      }\n    });\n  }\n\n  _onSettingsChange() {\n    const settings = this._settingsUi.getSettings();\n    this._saveSettings(settings);\n    this._compressSvg(settings);\n  }\n\n  async _onSettingsReset(oldSettings) {\n    const toast = this._toastsUi.show(\"Settings reset\", {\n      buttons: ['undo', 'dismiss'],\n      duration: 5000\n    });\n\n    if ((await toast.answer) === 'undo') {\n      this._settingsUi.setSettings(oldSettings);\n      this._onSettingsChange();\n    }\n  }\n\n  async _onInputChange(event) {\n    const settings = this._settingsUi.getSettings();\n    this._userHasInteracted = true;\n\n    try {\n      this._inputItem = await svgo.load(event.data);\n      this._inputFilename = event.filename;\n    }\n    catch(e) {\n      // This extra scope is working around a babel-minify bug.\n      // It's fixed in Babel 7.\n      {\n        const error = new Error(\"Load failed: \" + e.message);\n        this._mainMenuUi.stopSpinner();\n        this._handleError(error);\n        return;\n      }\n    }\n\n    this._cache.purge();\n\n    let firstIteration = true;\n\n    const compressed = () => {\n      if (firstIteration) {\n        this._outputUi.reset();\n        this._mainUi.activate();\n        this._mainMenuUi.allowHide = true;\n        this._mainMenuUi.hide();\n        firstIteration = false;\n      }\n    }\n\n    this._compressSvg(settings, () => compressed());\n\n    if (firstIteration) {\n      compressed();\n    }\n  }\n\n  _handleError(e) {\n    this._toastsUi.show(e.message);\n    console.error(e);\n  }\n\n  async _loadSettings() {\n    const settings = await storage.get('settings');\n    if (settings) this._settingsUi.setSettings(settings);\n  }\n\n  _saveSettings(settings) {\n    const copy = Object.assign({}, settings);\n    // doesn't make sense to retain the \"show original\" option\n    delete copy.original;\n    storage.set('settings', copy);\n  }\n\n  async _compressSvg(settings, iterationCallback = function(){}) {\n    const thisJobId = this._latestCompressJobId = Math.random();\n\n    await svgo.abortCurrent();\n\n    if (thisJobId != this._latestCompressJobId) {\n      // while we've been waiting, there's been a newer call\n      // to _compressSvg, we don't need to do anything\n      return;\n    }\n\n    if (settings.original) {\n      this._updateForFile(this._inputItem, {\n        compress: settings.gzip\n      });\n      return;\n    }\n\n    const cacheMatch = this._cache.match(settings.fingerprint);\n\n    if (cacheMatch) {\n      this._updateForFile(cacheMatch, {\n        compareToFile: this._inputItem,\n        compress: settings.gzip\n      });\n      return;\n    }\n\n    this._downloadButtonUi.working();\n\n    try {\n      const finalResultFile = await svgo.process(settings, resultFile => {\n        iterationCallback(resultFile);\n        this._updateForFile(resultFile, {\n          compareToFile: this._inputItem,\n          compress: settings.gzip\n        });\n      });\n\n      this._cache.add(settings.fingerprint, finalResultFile);\n    }\n    catch(e) {\n      if (e.message == \"abort\") return;\n      e.message = \"Minifying error: \" + e.message;\n      this._handleError(e);\n    }\n    finally {\n      this._downloadButtonUi.done();\n    }\n  }\n\n  async _updateForFile(svgFile, { compareToFile, compress }) {\n    this._outputUi.update(svgFile);\n    this._downloadButtonUi.setDownload(this._inputFilename, svgFile);\n    this._copyButtonUi.setCopyText(svgFile.text);\n\n    this._resultsUi.update({\n      comparisonSize: compareToFile && (await compareToFile.size({ compress })),\n      size: await svgFile.size({ compress })\n    });\n  }\n}\n\n","import WorkerMessenger from './worker-messenger';\nimport SvgFile from './svg-file';\n\nexport default class Svgo extends WorkerMessenger {\n  constructor() {\n    super('js/svgo-worker.js');\n    this._abortOnNextIteration = false;\n    this._currentJob = Promise.resolve();\n  }\n\n  async load(svgText) {\n    const {width, height} = await this._requestResponse({\n      action: 'load',\n      data: svgText\n    });\n\n    return new SvgFile(svgText, width, height);\n  }\n\n  process(settings, iterationCallback) {\n    return this._currentJob = this.abortCurrent().then(async () => {\n      this._abortOnNextIteration = false;\n\n      let result = await this._requestResponse({\n        action: 'process',\n        settings\n      });\n\n      var resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n\n      iterationCallback(resultFile);\n\n      if (settings.multipass) {\n        while (result = await this.nextPass()) {\n          if (this._abortOnNextIteration) {\n            throw Error('abort');\n          }\n          resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n          iterationCallback(resultFile);\n        }\n      }\n\n      // return final result\n      return resultFile;\n    });\n  }\n\n  nextPass() {\n    return this._requestResponse({\n      action: 'nextPass'\n    });\n  }\n\n  async abortCurrent() {\n    this._abortOnNextIteration = true;\n    await this._currentJob;\n  }\n\n  async release() {\n    await this.abortCurrent();\n    super.release();\n  }\n}\n","import { trackFocusMethod } from './utils';\nimport MainController from './main-controller';\n\ntrackFocusMethod();\nnew MainController();\n"],"names":["domReady","Promise","resolve","checkState","document","readyState","addEventListener","range","createRange","strToEl","str","createContextualFragment","children","selectNode","documentElement","entityMap","escapeHtmlTag","strings","values","map","s","String","replace","reduce","val","i","readFileAsText","file","Response","text","transitionClassFunc","removeClass","el","className","transitionClass","classList","contains","transitionEnd","listener","event","target","removeEventListener","remove","add","requestAnimationFrame","transitionTimeout","setTimeout","race","transitionToClass","transitionFromClass","idbKeyval","db","getDB","reject","openreq","indexedDB","open","onerror","error","onupgradeneeded","result","createObjectStore","onsuccess","async","withStore","type","callback","transaction","oncomplete","objectStore","get","key","req","store","set","value","put","delete","self","localStorage","getItem","setItem","removeItem","WorkerMessenger","constructor","url","this","_requestId","_pending","_url","_worker","Worker","onmessage","_onMessage","release","terminate","Object","keys","_fulfillPending","Error","_postMessage","message","postMessage","data","id","console","log","resolver","_requestResponse","gzip","super","compress","svgData","SvgFile","width","height","_compressedSize","_blob","size","then","r","byteLength","length","_create","Blob","URL","createObjectURL","blob","revokeObjectURL","getXY","obj","x","pageX","y","pageY","touchDistance","touch1","touch2","dx","Math","abs","dy","sqrt","getMidpoint","point1","point2","getPoints","touches","Array","from","t","PanZoom","eventArea","shouldCaptureFunc","_target","_shouldCaptureFunc","_dx","_dy","_scale","_active","_lastPoints","forEach","funcName","bind","_onPointerDown","e","_onWheel","reset","_update","preventDefault","boundingRect","getBoundingClientRect","delta","deltaY","deltaMode","max","min","scaleDiff","left","top","_onFirstPointerDown","_onPointerMove","_onPointerUp","which","points","averagePoint","averageLastPoint","style","WebkitTransform","transform","pop","SvgOutput","container","_svgFrame","querySelector","scrolling","_svgContainer","_panZoom","setSvg","svgFile","nextLoad","_nextLoadPromise","src","encodeURIComponent","onload","prism","highlight","CodeOutput","_codeEl","innerHTML","Output","_types","image","code","_svgFile","_switchQueue","noAnimate","update","_activeType","toRemove","toAdd","appendChild","transitions","push","all","removeChild","Ripple","animate","offsetLeft","Spinner","_showTimeout","display","animEndListener","show","delay","clearTimeout","hide","FloatingActionButton","title","href","iconSvg","minor","setAttribute","_ripple","_spinner","_onClick","working","done","DownloadButton","navigator","msSaveBlob","filename","setDownload","download","copySupported","queryCommandSupported","CopyButton","_text","_pre","createElement","textContent","body","getSelection","removeAllRanges","window","addRange","execCommand","setCopyText","BgFillButton","setColor","color","backgroundColor","round","num","places","mult","pow","floor","humanSize","bytes","Results","_sizeEl","_newSizeEl","_diffEl","comparisonSize","ReflectOwnKeys","R","Reflect","ReflectApply","apply","receiver","args","Function","prototype","call","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","name","errorListener","err","removeListener","slice","arguments","eventTargetAgnosticAddListener","once","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","TypeError","_getMaxListeners","that","_addListener","prepend","m","events","existing","warning","create","newListener","emit","unshift","warned","w","count","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","n","copy","wrapListener","arg","defineProperty","enumerable","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","spliceOne","off","removeAllListeners","rawListeners","eventNames","MaterialSlider","rangeEl","_handle","_trackOn","_val","parentNode","insertBefore","firstChild","_onInputChange","_onRangeMouseDown","_onRangeTouchStart","_onRangeTouchEnd","_setPosition","focus","blur","upListener","_","newVal","percent","Settings","_throttleTimeout","_pluginInputs","querySelectorAll","_globalInputs","_resetRipple","_resetBtn","_sliderMap","WeakMap","_scroller","_onChange","_onMouseWheel","_onReset","closest","currentTarget","scrollTop","oldSettings","getSettings","inputEl","checked","hasAttribute","getAttribute","setSettings","settings","plugins","fingerprint","output","join","MainMenu","allowHide","_loadFileInput","_pasteInput","_loadDemoBtn","_loadFileBtn","_pasteLabel","_overlay","_menu","_onMenuButtonClick","_onOverlayClick","_onLoadFileClick","_onLoadDemoClick","_onFileInputChange","_onTextInputChange","stopSpinner","showFilePicker","click","trim","includes","files","fetch","serviceWorker","controller","Toast","duration","buttons","_content","_answerResolve","_hideTimeout","answer","button","buttonEl","Toasts","toast","FileDrop","_activeEnters","_currentEnteredElement","_onDragEnter","_onDragLeave","_onDrop","dataTransfer","Preloader","activated","Changelog","loadedVersion","_loadedVersion","showLogFrom","lastLoadedVersion","changelog","json","startIndex","endIndex","entry","version","changeLis","changes","change","ResultsContainer","results","_results","_mobileContainer","_container","_query","matchMedia","_positionResults","matches","ViewToggler","input","ResultsCache","_size","purge","_fingerprints","_items","_index","oldItem","match","indexOf","MainUi","elements","_activated","_toActivate","activate","svgo","_abortOnNextIteration","_currentJob","load","svgText","action","process","iterationCallback","abortCurrent","resultFile","dimensions","multipass","nextPass","focusMethod","_mainUi","_outputUi","_downloadButtonUi","_copyButtonUi","_bgFillUi","_resultsUi","_settingsUi","_mainMenuUi","_toastsUi","_dropUi","_preloaderUi","_changelogUi","_resultsContainerUi","_viewTogglerUi","_onSettingsChange","_onSettingsReset","_handleError","_onViewSelectionChange","_onGlobalKeyDown","_inputItem","_cache","_latestCompressJobId","_userHasInteracted","_reloading","register","scope","registration","_onUpdateFound","storage","lastSeenVersion","actionContainer","minorActionContainer","_loadSettings","ctrlKey","metaKey","newWorker","installing","location","reload","_saveSettings","_compressSvg","_inputFilename","firstIteration","compressed","assign","original","thisJobId","random","_updateForFile","cacheMatch","compareToFile","finalResultFile"],"mappings":"yBAEO,MAAMA,EAAW,IAAIC,SAAQC,IAClC,SAASC,IACoB,WAAvBC,SAASC,YAAyBH,IAExCE,SAASE,iBAAiB,mBAAoBH,GAC9CA,OAGII,EAAQH,SAASI,cAGhB,SAASC,EAAQC,GAEtB,OADaH,EAAMI,yBAAyBD,GAChCE,SAAS,GAJvBL,EAAMM,WAAWT,SAASU,iBAO1B,MAAMC,EAAY,CAChB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,UAOA,SAASC,EAAcC,KAAYC,GAExC,OADAA,EAASA,EAAOC,KAAIC,GAJbC,OAI6BD,GAJjBE,QAAQ,cAAcF,GAAKL,EAAUK,OAKjDH,EAAQM,QAAO,CAACb,EAAKc,EAAKC,IAAMf,GAAOc,GAAON,EAAOO,IAAM,MAAK,IAGlE,SAASC,EAAeC,GAC7B,OAAO,IAAIC,SAASD,GAAME,OAG5B,SAASC,GAAoBC,YAACA,GAAc,GAAO,IACjD,OAAO,SAASC,EAAIC,EAAY,SAAUC,EAAkB,cAC1D,GAAIH,GACF,IAAKC,EAAGG,UAAUC,SAASH,GAAY,OAAOhC,QAAQC,eAGtD,GAAI8B,EAAGG,UAAUC,SAASH,GAAY,OAAOhC,QAAQC,UAGvD,MAAMmC,EAAgB,IAAIpC,SAAQC,IAChC,MAAMoC,EAAWC,IACXA,EAAMC,QAAUR,IACpBA,EAAGS,oBAAoB,sBAAuBH,GAC9CN,EAAGS,oBAAoB,gBAAiBH,GACxCN,EAAGG,UAAUO,OAAOR,GACpBhC,MAGF8B,EAAGG,UAAUQ,IAAIT,GAEjBU,uBAAsB,KACpBZ,EAAG1B,iBAAiB,sBAAuBgC,GAC3CN,EAAG1B,iBAAiB,gBAAiBgC,GACrCN,EAAGG,UAAUJ,EAAc,SAAW,OAAOE,SAI3CY,EAAoB,IAAI5C,SAAQC,GAAW4C,WAAW5C,EAAS,OAErE,OAAOD,QAAQ8C,KAAK,CAACV,EAAeQ,KAIjC,MAAMG,EAAoBlB,IACpBmB,EAAsBnB,EAAoB,CAACC,aAAa,IC1E9D,IAAImB,EAAY,MACrB,IAAIC,EAEJ,SAASC,IAmBP,OAlBKD,IACHA,EAAK,IAAIlD,SAAQ,CAACC,EAASmD,KACzB,MAAMC,EAAUC,UAAUC,KAAK,cAAe,GAE9CF,EAAQG,QAAU,KAChBJ,EAAOC,EAAQI,QAGjBJ,EAAQK,gBAAkB,KAExBL,EAAQM,OAAOC,kBAAkB,WAGnCP,EAAQQ,UAAY,KAClB5D,EAAQoD,EAAQM,aAIfT,EAGTY,eAAeC,EAAUC,EAAMC,GAC7B,MAAMf,QAAWC,IACjB,OAAO,IAAInD,SAAQ,CAACC,EAASmD,KAC3B,MAAMc,EAAchB,EAAGgB,YAAY,SAAUF,GAC7CE,EAAYC,WAAa,IAAMlE,IAC/BiE,EAAYV,QAAU,IAAMJ,EAAOc,EAAYT,OAC/CQ,EAASC,EAAYE,YAAY,cAIrC,MAAO,CACLC,UAAUC,GACR,IAAIC,EAIJ,aAHMR,EAAU,YAAYS,IAC1BD,EAAMC,EAAMH,IAAIC,MAEXC,EAAIZ,QAEbc,IAAG,CAACH,EAAKI,IACAX,EAAU,aAAaS,IAC5BA,EAAMG,IAAID,EAAOJ,MAGrBM,OAAON,GACEP,EAAU,aAAaS,IAC5BA,EAAMI,OAAON,QAlDE,GA0DlBO,KAAKvB,YACRL,EAAY,CACVoB,IAAKC,GAAOtE,QAAQC,QAAQ6E,aAAaC,QAAQT,IACjDG,IAAK,CAACH,EAAK/C,IAAQvB,QAAQC,QAAQ6E,aAAaE,QAAQV,EAAK/C,IAC7DqD,OAAQN,GAAOtE,QAAQC,QAAQ6E,aAAaG,WAAWX,MC5D5C,MAAMY,EACnBC,YAAYC,GACVC,KAAKC,WAAa,EAElBD,KAAKE,SAAW,GAChBF,KAAKG,KAAOJ,EACZC,KAAKI,QAAU,IAAIC,OAAOL,KAAKG,MAC/BH,KAAKI,QAAQE,UAAYrD,GAAS+C,KAAKO,WAAWtD,GAGpDuD,gBACMR,KAAKI,UACPJ,KAAKI,QAAQK,YACbT,KAAKI,QAAU,MAEjB,IAAK,MAAMnB,KAAOyB,OAAOC,KAAKX,KAAKE,UACjCF,KAAKY,gBAAgB3B,EAAK,KAAM,IAAI4B,MAAM,sBAAwBb,KAAKG,OAI3EW,aAAaC,GACXf,KAAKI,QAAQY,YAAYD,GAG3BR,WAAWtD,GACJA,EAAMgE,KAAKC,GAKhBlB,KAAKY,gBAAgB3D,EAAMgE,KAAKC,GAAIjE,EAAMgE,KAAK3C,OAAQrB,EAAMgE,KAAK7C,OAJhE+C,QAAQC,IAAI,qBAAsBnE,GAOtC2D,gBAAgBM,EAAI5C,EAAQF,GAC1B,MAAMiD,EAAWrB,KAAKE,SAASgB,GAE1BG,UAKErB,KAAKE,SAASgB,GAEjB9C,EACFiD,EAAS,GAAG,IAAIR,MAAMzC,IAIxBiD,EAAS,GAAG/C,IAXV6C,QAAQC,IAAI,kBAAmB,CAAEF,GAAAA,EAAI5C,OAAAA,EAAQF,MAAAA,IAcjDkD,iBAAiBP,GACf,OAAO,IAAIpG,SAAQ,CAACC,EAASmD,KAC3BgD,EAAQG,KAAOlB,KAAKC,WACpBD,KAAKE,SAASa,EAAQG,IAAM,CAACtG,EAASmD,GACtCiC,KAAKc,aAAaC,OC3CjB,MAAMQ,EAAO,IAZpB,cAAmB1B,EACjBC,cACE0B,MAAM,qBAGRC,SAASC,GACP,OAAO1B,KAAKsB,iBAAiB,CAC3BL,KAAMS,MCPG,MAAMC,EACnB7B,YAAYvD,EAAMqF,EAAOC,GACvB7B,KAAKzD,KAAOA,EACZyD,KAAK8B,gBAAkB,KACvB9B,KAAKG,KAAO,GACZH,KAAK+B,MAAQ,KACb/B,KAAK4B,MAAQA,EACb5B,KAAK6B,OAASA,EAGhBG,YAAWP,SAAEA,IACX,OAAKA,GAIAzB,KAAK8B,kBACR9B,KAAK8B,gBAAkBP,EAAKE,SAASzB,KAAKzD,MAAM0F,MAAKC,GAAKA,EAAEC,cAGvDnC,KAAK8B,iBAPH9B,KAAKzD,KAAK6F,OAUrBC,UAGErC,KAAK+B,MAAQ,IAAIO,KAAK,CAACtC,KAAKzD,MAAO,CAACoC,KAAM,kBAC1CqB,KAAKG,KAAOoC,IAAIC,gBAAgBxC,KAAK+B,OAGvCU,WAEE,OADKzC,KAAK+B,OAAO/B,KAAKqC,UACfrC,KAAK+B,MAGdhC,UAEE,OADKC,KAAKG,MAAMH,KAAKqC,UACdrC,KAAKG,KAGdK,UACOR,KAAKG,OAEVH,KAAK+B,MAAQ,KACbQ,IAAIG,gBAAgB1C,KAAKG,QC7C7B,SAASwC,EAAMC,GACb,MAAO,CACLC,EAAGD,EAAIE,MACPC,EAAGH,EAAII,OAIX,SAASC,EAAcC,EAAQC,GAC7B,MAAMC,EAAKC,KAAKC,IAAIH,EAAON,EAAIK,EAAOL,GAChCU,EAAKF,KAAKC,IAAIH,EAAOJ,EAAIG,EAAOH,GACtC,OAAOM,KAAKG,KAAKJ,EAAGA,EAAKG,EAAGA,GAG9B,SAASE,EAAYC,EAAQC,GAC3B,MAAO,CACLd,GAAIa,EAAOb,EAAIc,EAAOd,GAAK,EAC3BE,GAAIW,EAAOX,EAAIY,EAAOZ,GAAK,GAI/B,SAASa,EAAU3G,GACjB,OAAIA,EAAM4G,QACDC,MAAMC,KAAK9G,EAAM4G,SAAShI,KAAImI,GAAKrB,EAAMqB,KAGzC,CAACrB,EAAM1F,IAIH,MAAMgH,EACnBnE,YAAY5C,GAAQgH,UAClBA,EAAYhH,EAAMiH,kBAClBA,EAAoB,MAAM,IAC1B,IACAnE,KAAKoE,QAAUlH,EACf8C,KAAKqE,mBAAqBF,EAC1BnE,KAAKsE,IAAM,EACXtE,KAAKuE,IAAM,EACXvE,KAAKwE,OAAS,EACdxE,KAAKyE,QAAU,EACfzE,KAAK0E,YAAc,GAGnB,CACE,iBACA,iBACA,gBACAC,SAAQC,IACR5E,KAAK4E,GAAY5E,KAAK4E,GAAUC,KAAK7E,SAIvCkE,EAAUlJ,iBAAiB,YAAagF,KAAK8E,gBAC7CZ,EAAUlJ,iBAAiB,aAAcgF,KAAK8E,gBAG9CZ,EAAUlJ,iBAAiB,SAAS+J,GAAK/E,KAAKgF,SAASD,KAGzDE,QACEjF,KAAKsE,IAAM,EACXtE,KAAKuE,IAAM,EACXvE,KAAKwE,OAAS,EACdxE,KAAKkF,UAGPF,SAAS/H,GACP,IAAK+C,KAAKqE,mBAAmBpH,EAAMC,QAAS,OAC5CD,EAAMkI,iBAEN,MAAMC,EAAepF,KAAKoE,QAAQiB,wBAClC,IAAIC,EAAQrI,EAAMsI,OAEM,IAApBtI,EAAMuI,YAERF,GAAS,IAIXA,EAAQjC,KAAKoC,IAAIpC,KAAKqC,IAAIJ,EAAO,KAAM,IAEvC,MAAMK,EAAaL,EAAQ,IAAO,EAG9BtF,KAAKwE,OAASmB,EAAY,MAE9B3F,KAAKwE,QAAUmB,EACf3F,KAAKsE,MAAQrH,EAAM6F,MAAQsC,EAAaQ,OAASD,EAAY,GAC7D3F,KAAKuE,MAAQtH,EAAM+F,MAAQoC,EAAaS,MAAQF,EAAY,GAC5D3F,KAAKkF,WAGPY,oBAAoB7I,GAClBnC,SAASE,iBAAiB,YAAagF,KAAK+F,gBAC5CjL,SAASE,iBAAiB,UAAWgF,KAAKgG,cAC1ClL,SAASE,iBAAiB,YAAagF,KAAK+F,gBAC5CjL,SAASE,iBAAiB,WAAYgF,KAAKgG,cAG7ClB,eAAe7H,GACK,aAAdA,EAAM0B,MAAsC,GAAf1B,EAAMgJ,OAClCjG,KAAKqE,mBAAmBpH,EAAMC,UACnCD,EAAMkI,iBAENnF,KAAK0E,YAAcd,EAAU3G,GAC7B+C,KAAKyE,UAEgB,IAAjBzE,KAAKyE,SACPzE,KAAK8F,oBAAoB7I,IAI7B8I,eAAe9I,GACbA,EAAMkI,iBACN,MAAMe,EAAStC,EAAU3G,GACnBkJ,EAAeD,EAAOjK,OAAOwH,GAC7B2C,EAAmBpG,KAAK0E,YAAYzI,OAAOwH,GAC3C2B,EAAepF,KAAKoE,QAAQiB,wBAKlC,GAHArF,KAAKsE,KAAO6B,EAAatD,EAAIuD,EAAiBvD,EAC9C7C,KAAKuE,KAAO4B,EAAapD,EAAIqD,EAAiBrD,EAE1CmD,EAAO,GAAI,CACb,MAAMP,EAAY1C,EAAciD,EAAO,GAAIA,EAAO,IAAMjD,EAAcjD,KAAK0E,YAAY,GAAI1E,KAAK0E,YAAY,IAC5G1E,KAAKwE,QAAUmB,EACf3F,KAAKsE,MAAQ6B,EAAatD,EAAIuC,EAAaQ,OAASD,EAAY,GAChE3F,KAAKuE,MAAQ4B,EAAapD,EAAIqC,EAAaS,MAAQF,EAAY,GAGjE3F,KAAKkF,UACLlF,KAAK0E,YAAcwB,EAGrBhB,UACElF,KAAKoE,QAAQiC,MAAMC,gBAAkBtG,KAAKoE,QAAQiC,MAAME,UACpD,eAAevG,KAAKsE,UAAUtE,KAAKuE,mBAAmBvE,KAAKwE,UAGjEwB,aAAa/I,GACXA,EAAMkI,iBACNnF,KAAKyE,UACLzE,KAAK0E,YAAY8B,MAEbxG,KAAKyE,QACPzE,KAAK0E,YAAcd,EAAU3G,IAI/BnC,SAASqC,oBAAoB,YAAa6C,KAAK+F,gBAC/CjL,SAASqC,oBAAoB,UAAW6C,KAAKgG,cAC7ClL,SAASqC,oBAAoB,YAAa6C,KAAK+F,gBAC/CjL,SAASqC,oBAAoB,WAAY6C,KAAKgG,gBCpJnC,MAAMS,EACnB3G,cACEE,KAAK0G,UAAYvL,EACf,iKAWF6E,KAAK2G,UAAY3G,KAAK0G,UAAUE,cAAc,cAC9C5G,KAAK2G,UAAUE,UAAY,KAE3B7G,KAAK8G,cAAgB9G,KAAK0G,UAAUE,cAAc,kBAElDlM,EAASuH,MAAK,KACZjC,KAAK+G,SAAW,IAAI9C,EAAQjE,KAAK8G,cAAe,CAC9C5C,UAAWlE,KAAK0G,eAKtBM,OAAOC,GAIL,MAAMC,EAAWlH,KAAKmH,mBAItB,OAHAnH,KAAK2G,UAAUS,IAAM,oCAAsCC,mBAAmBJ,EAAQ1K,MACtFyD,KAAK2G,UAAU/E,MAAQqF,EAAQrF,MAC/B5B,KAAK2G,UAAU9E,OAASoF,EAAQpF,OACzBqF,EAGTjC,QACEjF,KAAK2G,UAAUS,IAAM,cACrBpH,KAAK+G,SAAS9B,QAGhBkC,mBACE,OAAO,IAAIxM,SAAQC,IACjB,MAAM0M,EAAS,KACbtH,KAAK2G,UAAUxJ,oBAAoB,OAAQmK,GAC3C1M,KAEFoF,KAAK2G,UAAU3L,iBAAiB,OAAQsM,OCjD9C,MAAMC,EAAQ,ICAC,cAAoB1H,EACjCC,cACE0B,MAAM,sBAGRgG,UAAU9F,GACR,OAAO1B,KAAKsB,iBAAiB,CAC3BL,KAAMS,MDLG,MAAM+F,EACnB3H,cACEE,KAAK0G,UAAYvL,EACf,2DAIF6E,KAAK0H,QAAU1H,KAAK0G,UAAUE,cAAc,QAG9CI,aAAaC,GACXjH,KAAK0H,QAAQC,gBAAkBJ,EAAMC,UAAUP,EAAQ1K,MAGzD0I,QACEjF,KAAK0H,QAAQC,UAAY,IEfd,MAAMC,EACnB9H,cACEE,KAAK0G,UAAYvL,EACf,uCAGF6E,KAAK6H,OAAS,CACZC,MAAO,IAAIrB,EACXsB,KAAM,IAAIN,GAGZzH,KAAKgI,SAAW,KAChBhI,KAAKiI,aAAetN,QAAQC,UAC5BoF,KAAKZ,IAAI,QAAS,CAAC8I,WAAW,IAGhCC,OAAOlB,GAEL,OADAjH,KAAKgI,SAAWf,EACTjH,KAAK6H,OAAO7H,KAAKoI,aAAapB,OAAOC,GAG9ChC,QACEjF,KAAK6H,OAAO7H,KAAKoI,aAAanD,QAGhC7F,IAAIT,GAAMuJ,UACRA,GAAY,GACZ,IACA,OAAOlI,KAAKiI,aAAejI,KAAKiI,aAAahG,MAAKxD,UAChD,MAAM4J,EAAWrI,KAAKoI,aAAepI,KAAK6H,OAAO7H,KAAKoI,aAAa1B,UAEnE1G,KAAKoI,YAAczJ,EACnB,MAAM2J,EAAQtI,KAAK6H,OAAO7H,KAAKoI,aAAa1B,UAK5C,GAJA1G,KAAK0G,UAAU6B,YAAYD,GAEvBtI,KAAKgI,gBAAgBhI,KAAKmI,OAAOnI,KAAKgI,UAEtCE,EACFI,EAAMzL,UAAUQ,IAAI,UAChBgL,GAAUA,EAASxL,UAAUO,OAAO,cAErC,CACH,MAAMoL,EAAc,CAClB9K,EAAkB4K,IAGhBD,GAAUG,EAAYC,KAAK9K,EAAoB0K,UAE7C1N,QAAQ+N,IAAIF,GAGhBH,GAAUrI,KAAK0G,UAAUiC,YAAYN,OCrDhC,MAAMO,EACnB9I,cACEE,KAAK0G,UAAYvL,EAAQ,8BAG3B0N,UACE7I,KAAK0G,UAAU7J,UAAUO,OAAO,WAChC4C,KAAK0G,UAAUoC,WACf9I,KAAK0G,UAAU7J,UAAUQ,IAAI,YCRlB,MAAM0L,EACnBjJ,cACEE,KAAK0G,UAAYvL,EACf,+RAiBF6E,KAAKgJ,aAAe,KACpBhJ,KAAK0G,UAAUL,MAAM4C,QAAU,OAE/B,MAAMC,EAAkBjM,IAClBA,EAAMC,QAAU8C,KAAK0G,YACvB1G,KAAK0G,UAAUL,MAAM4C,QAAU,SAInCjJ,KAAK0G,UAAU1L,iBAAiB,qBAAsBkO,GACtDlJ,KAAK0G,UAAU1L,iBAAiB,eAAgBkO,GAGlDC,KAAKC,EAAQ,KACXC,aAAarJ,KAAKgJ,cAClBhJ,KAAK0G,UAAUL,MAAM4C,QAAU,OAC/BjJ,KAAK0G,UAAU7J,UAAUO,OAAO,YAChC4C,KAAKgJ,aAAexL,YAAW,KAC7BwC,KAAK0G,UAAUL,MAAM4C,QAAU,KAC9BG,GAGLE,OACED,aAAarJ,KAAKgJ,cAClBhJ,KAAK0G,UAAU7J,UAAUQ,IAAI,aC1ClB,MAAMkM,EACnBzJ,aAAY0J,MAAEA,EAAKC,KAAEA,EAAIC,QAAEA,EAAO7M,UAAEA,EAAS8M,MAAEA,IAC7C3J,KAAK0G,UAAYvL,GACdsO,EAAO,MAAQ,oCACdC,GACDD,EAAO,OAAS,WAGfA,IACFzJ,KAAK0G,UAAU+C,KAAOA,GAEpBD,GACFxJ,KAAK0G,UAAUkD,aAAa,QAASJ,GAEvCxJ,KAAK0G,UAAU7J,UAAUQ,IAAIsM,EAAQ,+BAAiC,0BAClE9M,GACFA,EAAU8H,SAAShI,IAAgBqD,KAAK0G,UAAU7J,UAAUQ,IAAIV,MAGlEqD,KAAK6J,QAAU,IAAIjB,EACnB5I,KAAK0G,UAAU6B,YAAYvI,KAAK6J,QAAQnD,WAExC1G,KAAK8J,SAAW,IAAIf,EACpB/I,KAAK0G,UAAU6B,YAAYvI,KAAK8J,SAASpD,WAEzC1G,KAAK0G,UAAU1L,iBAAiB,SAASiC,GAAS+C,KAAK+J,SAAS9M,KAGlE8M,SAAS9M,GACP+C,KAAK6J,QAAQhB,UAGfmB,UACEhK,KAAK8J,SAASX,KAAK,KAGrBc,OACEjK,KAAK8J,SAASR,QCvCH,MAAMY,UAAuBX,EAC1CzJ,cACE,MAAM0J,EAAQ,WAEdhI,MAAM,CACJgI,MAAAA,EACAC,KAAM,KACNC,qIAQF1J,KAAKgI,SAAW,KAGlB+B,SAAS9M,GACPuE,MAAMuI,SAAS9M,GAGX,eAAgBkN,YAClBlN,EAAMkI,iBACNgF,UAAUC,WAAWpK,KAAKgI,SAASvF,KAAMzC,KAAKgI,SAASqC,WAI3DC,YAAYD,EAAUpD,GACpBjH,KAAK0G,UAAU6D,SAAWF,EAC1BrK,KAAK0G,UAAU+C,KAAOxC,EAAQlH,IAG9BC,KAAKgI,SAAWf,GCjCb,MAAMuD,EAAiB1P,SAAS2P,uBAAyB3P,SAAS2P,sBAAsB,QAEhF,MAAMC,UAAmBnB,EACtCzJ,cACE,MAAM0J,EAAQ,eAEdhI,MAAM,CACJgI,MAAAA,EACAE,QAEI,gDAAUF,6IAIdG,OAAO,IAGT3J,KAAK2K,MAAQ,KACb3K,KAAK4K,KAAO9P,SAAS+P,cAAc,OAGrCd,SAAS9M,GACPuE,MAAMuI,SAAS9M,GACf+C,KAAK4K,KAAKE,YAAc9K,KAAK2K,MAC7B7P,SAASiQ,KAAKxC,YAAYvI,KAAK4K,MAC/BI,eAAeC,kBAEf,MAAMhQ,EAAQH,SAASI,cACvBD,EAAMM,WAAWyE,KAAK4K,MAEtBM,OAAOF,eAAeG,SAASlQ,GAE/BH,SAASsQ,YAAY,QACrBJ,eAAeC,kBACfnQ,SAASiQ,KAAKpC,YAAY3I,KAAK4K,MAGjCS,YAAY9O,EAAM8N,GAChBrK,KAAK2K,MAAQpO,GCtCF,MAAM+O,UAAqB/B,EACxCzJ,cACE,MAAM0J,EAAQ,8BAEdhI,MAAM,CACJgI,MAAAA,EACAE,QAEI,gDAAUF,ojCAId3M,UAAW,CAAE,UACb8M,OAAO,IAIXI,SAAS9M,GACPuE,MAAMuI,SAAS9M,GAEX+C,KAAK0G,UAAU7J,UAAUC,SAAS,WACpCkD,KAAK0G,UAAU7J,UAAUO,OAAO,UAChC4C,KAAKuL,SAAS,iBAGdvL,KAAK0G,UAAU7J,UAAUQ,IAAI,UAC7B2C,KAAKuL,SAAS,uBAIlBA,SAASC,GACP1Q,SAASU,gBAAgB6K,MAAMoF,gBAAkBD,GC/BrD,SAASE,EAAMC,EAAKC,GAClB,MAAMC,EAAOxI,KAAKyI,IAAI,GAAIF,GAC1B,OAAOvI,KAAK0I,MAAM1I,KAAKqI,MAAMC,EAAME,IAASA,EAG9C,SAASG,EAAUC,GACjB,OAAIA,EAAQ,KACHA,EAAQ,SAGRP,EAAMO,EAAQ,KAAM,GAAK,IAIrB,MAAMC,EACnBpM,cACEE,KAAK0G,UAAYvL,EACf,oFAMF6E,KAAKmM,QAAUnM,KAAK0G,UAAUE,cAAc,SAC5C5G,KAAKoM,WAAapM,KAAK0G,UAAUE,cAAc,YAC/C5G,KAAKqM,QAAUrM,KAAK0G,UAAUE,cAAc,SAG9CuB,QAAOnG,KAAEA,EAAIsK,eAAEA,IAEXtM,KAAKmM,QAAQrB,YADXwB,EACyBN,EAAUM,GAAkB,MAAQN,EAAUhK,GAE9CgK,EAAUhK,GAGvChC,KAAKqM,QAAQxP,UAAUO,OAAO,WAAY,YAGrCkP,EAIItK,IAASsK,EAChBtM,KAAKqM,QAAQvB,YAAc,QAG3B9K,KAAKqM,QAAQvB,YAAcY,EAAM1J,EAAOsK,EAAiB,IAAK,GAAK,IACnEtM,KAAKqM,QAAQxP,UAAUQ,IAAI2E,EAAOsK,EAAiB,WAAa,aARhEtM,KAAKqM,QAAQvB,YAAc,QCX7ByB,iBAPAC,EAAuB,iBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,mBAAZA,EAAEG,MAC7BH,EAAEG,MACF,SAAsBzP,EAAQ0P,EAAUC,GACxC,OAAOC,SAASC,UAAUJ,MAAMK,KAAK9P,EAAQ0P,EAAUC,IAKzDN,EADEC,GAA0B,mBAAdA,EAAES,QACCT,EAAES,QACVvM,OAAOwM,sBACC,SAAwBhQ,GACvC,OAAOwD,OAAOyM,oBAAoBjQ,GAC/BkQ,OAAO1M,OAAOwM,sBAAsBhQ,KAGxB,SAAwBA,GACvC,OAAOwD,OAAOyM,oBAAoBjQ,IAQtC,IAAImQ,EAAcC,OAAOC,OAAS,SAAqBlO,GACrD,OAAOA,GAAUA,GAGnB,SAASmO,IACPA,EAAaC,KAAKT,KAAKhN,gBAERwN,iBAyYjB,SAAcE,EAASC,GACrB,OAAO,IAAIhT,SAAQ,SAAUC,EAASmD,GACpC,SAAS6P,EAAcC,GACrBH,EAAQI,eAAeH,EAAMtM,GAC7BtD,EAAO8P,GAGT,SAASxM,IAC+B,mBAA3BqM,EAAQI,gBACjBJ,EAAQI,eAAe,QAASF,GAElChT,EAAQ,GAAGmT,MAAMf,KAAKgB,YAGxBC,EAA+BP,EAASC,EAAMtM,EAAU,CAAE6M,MAAM,IACnD,UAATP,GAMR,SAAuCD,EAASS,EAASC,GAC7B,mBAAfV,EAAQW,IACjBJ,EAA+BP,EAAS,QAASS,EAASC,GAPxDE,CAA8BZ,EAASE,EAAe,CAAEM,MAAM,QArZpEV,EAAaA,aAAeA,EAE5BA,EAAaT,UAAUwB,aAAUC,EACjChB,EAAaT,UAAU0B,aAAe,EACtCjB,EAAaT,UAAU2B,mBAAgBF,EAIvC,IAAIG,EAAsB,GAE1B,SAASC,EAAc5R,GACrB,GAAwB,mBAAbA,EACT,MAAM,IAAI6R,UAAU,0EAA4E7R,GAsCpG,SAAS8R,EAAiBC,GACxB,YAA2BP,IAAvBO,EAAKL,cACAlB,EAAamB,oBACfI,EAAKL,cAmDd,SAASM,EAAa9R,EAAQyB,EAAM3B,EAAUiS,GAC5C,IAAIC,EACAC,EACAC,EA1HsBC,EAgJ1B,GApBAT,EAAc5R,QAGCwR,KADfW,EAASjS,EAAOqR,UAEdY,EAASjS,EAAOqR,QAAU7N,OAAO4O,OAAO,MACxCpS,EAAOuR,aAAe,SAIKD,IAAvBW,EAAOI,cACTrS,EAAOsS,KAAK,cAAe7Q,EACf3B,EAASA,SAAWA,EAASA,SAAWA,GAIpDmS,EAASjS,EAAOqR,SAElBa,EAAWD,EAAOxQ,SAGH6P,IAAbY,EAEFA,EAAWD,EAAOxQ,GAAQ3B,IACxBE,EAAOuR,kBAeT,GAbwB,mBAAbW,EAETA,EAAWD,EAAOxQ,GAChBsQ,EAAU,CAACjS,EAAUoS,GAAY,CAACA,EAAUpS,GAErCiS,EACTG,EAASK,QAAQzS,GAEjBoS,EAAS3G,KAAKzL,IAIhBkS,EAAIJ,EAAiB5R,IACb,GAAKkS,EAAShN,OAAS8M,IAAME,EAASM,OAAQ,CACpDN,EAASM,QAAS,EAGlB,IAAIC,EAAI,IAAI9O,MAAM,+CACEuO,EAAShN,OAAS,IAAMrG,OAAO4C,GADjC,qEAIlBgR,EAAEhC,KAAO,8BACTgC,EAAEjC,QAAUxQ,EACZyS,EAAEhR,KAAOA,EACTgR,EAAEC,MAAQR,EAAShN,OA7KGiN,EA8KHM,EA7KnBxO,SAAWA,QAAQ0O,MAAM1O,QAAQ0O,KAAKR,GAiL1C,OAAOnS,EAcT,SAAS4S,IACP,IAAK9P,KAAK+P,MAGR,OAFA/P,KAAK9C,OAAO4Q,eAAe9N,KAAKrB,KAAMqB,KAAKgQ,QAC3ChQ,KAAK+P,OAAQ,EACY,IAArB/B,UAAU5L,OACLpC,KAAKhD,SAASgQ,KAAKhN,KAAK9C,QAC1B8C,KAAKhD,SAAS2P,MAAM3M,KAAK9C,OAAQ8Q,WAI5C,SAASiC,EAAU/S,EAAQyB,EAAM3B,GAC/B,IAAIkT,EAAQ,CAAEH,OAAO,EAAOC,YAAQxB,EAAWtR,OAAQA,EAAQyB,KAAMA,EAAM3B,SAAUA,GACjFmT,EAAUL,EAAYjL,KAAKqL,GAG/B,OAFAC,EAAQnT,SAAWA,EACnBkT,EAAMF,OAASG,EACRA,EA0HT,SAASC,EAAWlT,EAAQyB,EAAM0R,GAChC,IAAIlB,EAASjS,EAAOqR,QAEpB,QAAeC,IAAXW,EACF,MAAO,GAET,IAAImB,EAAanB,EAAOxQ,GACxB,YAAmB6P,IAAf8B,EACK,GAEiB,mBAAfA,EACFD,EAAS,CAACC,EAAWtT,UAAYsT,GAAc,CAACA,GAElDD,EAsDT,SAAyBE,GAEvB,IADA,IAAIC,EAAM,IAAI1M,MAAMyM,EAAInO,QACfjG,EAAI,EAAGA,EAAIqU,EAAIpO,SAAUjG,EAChCqU,EAAIrU,GAAKoU,EAAIpU,GAAGa,UAAYuT,EAAIpU,GAElC,OAAOqU,EA1DLC,CAAgBH,GAAcI,EAAWJ,EAAYA,EAAWlO,QAoBpE,SAASuO,EAAchS,GACrB,IAAIwQ,EAASnP,KAAKuO,QAElB,QAAeC,IAAXW,EAAsB,CACxB,IAAImB,EAAanB,EAAOxQ,GAExB,GAA0B,mBAAf2R,EACT,OAAO,EACF,QAAmB9B,IAAf8B,EACT,OAAOA,EAAWlO,OAItB,OAAO,EAOT,SAASsO,EAAWH,EAAKK,GAEvB,IADA,IAAIC,EAAO,IAAI/M,MAAM8M,GACZzU,EAAI,EAAGA,EAAIyU,IAAKzU,EACvB0U,EAAK1U,GAAKoU,EAAIpU,GAChB,OAAO0U,EA4CT,SAAS5C,EAA+BP,EAASC,EAAM3Q,EAAUoR,GAC/D,GAA0B,mBAAfV,EAAQW,GACbD,EAAMF,KACRR,EAAQQ,KAAKP,EAAM3Q,GAEnB0Q,EAAQW,GAAGV,EAAM3Q,OAEd,CAAA,GAAwC,mBAA7B0Q,EAAQ1S,iBAYxB,MAAM,IAAI6T,UAAU,6EAA+EnB,GATnGA,EAAQ1S,iBAAiB2S,GAAM,SAASmD,EAAaC,GAG/C3C,EAAMF,MACRR,EAAQvQ,oBAAoBwQ,EAAMmD,GAEpC9T,EAAS+T,OAhafrQ,OAAOsQ,eAAexD,EAAc,sBAAuB,CACzDyD,YAAY,EACZjS,IAAK,WACH,OAAO2P,GAETvP,IAAK,SAAS2R,GACZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAK1D,EAAY0D,GACpD,MAAM,IAAIG,WAAW,kGAAoGH,EAAM,KAEjIpC,EAAsBoC,KAI1BvD,EAAaC,KAAO,gBAEGe,IAAjBxO,KAAKuO,SACLvO,KAAKuO,UAAY7N,OAAOyQ,eAAenR,MAAMuO,UAC/CvO,KAAKuO,QAAU7N,OAAO4O,OAAO,MAC7BtP,KAAKyO,aAAe,GAGtBzO,KAAK0O,cAAgB1O,KAAK0O,oBAAiBF,GAK7ChB,EAAaT,UAAUqE,gBAAkB,SAAyBR,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKvD,EAAYuD,GAChD,MAAM,IAAIM,WAAW,gFAAkFN,EAAI,KAG7G,OADA5Q,KAAK0O,cAAgBkC,EACd5Q,MASTwN,EAAaT,UAAUsE,gBAAkB,WACvC,OAAOvC,EAAiB9O,OAG1BwN,EAAaT,UAAUyC,KAAO,SAAc7Q,GAE1C,IADA,IAAIkO,EAAO,GACF1Q,EAAI,EAAGA,EAAI6R,UAAU5L,OAAQjG,IAAK0Q,EAAKpE,KAAKuF,UAAU7R,IAC/D,IAAImV,EAAoB,UAAT3S,EAEXwQ,EAASnP,KAAKuO,QAClB,QAAeC,IAAXW,EACFmC,EAAWA,QAA4B9C,IAAjBW,EAAO/Q,WAC1B,IAAKkT,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIC,EAGJ,GAFI1E,EAAKzK,OAAS,IAChBmP,EAAK1E,EAAK,IACR0E,aAAc1Q,MAGhB,MAAM0Q,EAGR,IAAI1D,EAAM,IAAIhN,MAAM,oBAAsB0Q,EAAK,KAAOA,EAAGxQ,QAAU,IAAM,KAEzE,MADA8M,EAAI2D,QAAUD,EACR1D,EAGR,IAAIM,EAAUgB,EAAOxQ,GAErB,QAAgB6P,IAAZL,EACF,OAAO,EAET,GAAuB,mBAAZA,EACTzB,EAAayB,EAASnO,KAAM6M,OAE5B,CAAA,IAAI4E,EAAMtD,EAAQ/L,OACdsP,EAAYhB,EAAWvC,EAASsD,GACpC,IAAStV,EAAI,EAAGA,EAAIsV,IAAOtV,EACzBuQ,EAAagF,EAAUvV,GAAI6D,KAAM6M,GAGrC,OAAO,GAiETW,EAAaT,UAAU4E,YAAc,SAAqBhT,EAAM3B,GAC9D,OAAOgS,EAAahP,KAAMrB,EAAM3B,GAAU,IAG5CwQ,EAAaT,UAAUsB,GAAKb,EAAaT,UAAU4E,YAEnDnE,EAAaT,UAAU6E,gBACnB,SAAyBjT,EAAM3B,GAC7B,OAAOgS,EAAahP,KAAMrB,EAAM3B,GAAU,IAqBhDwQ,EAAaT,UAAUmB,KAAO,SAAcvP,EAAM3B,GAGhD,OAFA4R,EAAc5R,GACdgD,KAAKqO,GAAG1P,EAAMsR,EAAUjQ,KAAMrB,EAAM3B,IAC7BgD,MAGTwN,EAAaT,UAAU8E,oBACnB,SAA6BlT,EAAM3B,GAGjC,OAFA4R,EAAc5R,GACdgD,KAAK4R,gBAAgBjT,EAAMsR,EAAUjQ,KAAMrB,EAAM3B,IAC1CgD,MAIbwN,EAAaT,UAAUe,eACnB,SAAwBnP,EAAM3B,GAC5B,IAAI8U,EAAM3C,EAAQ4C,EAAU5V,EAAG6V,EAK/B,GAHApD,EAAc5R,QAGCwR,KADfW,EAASnP,KAAKuO,SAEZ,OAAOvO,KAGT,QAAawO,KADbsD,EAAO3C,EAAOxQ,IAEZ,OAAOqB,KAET,GAAI8R,IAAS9U,GAAY8U,EAAK9U,WAAaA,EACb,KAAtBgD,KAAKyO,aACTzO,KAAKuO,QAAU7N,OAAO4O,OAAO,cAEtBH,EAAOxQ,GACVwQ,EAAOrB,gBACT9N,KAAKwP,KAAK,iBAAkB7Q,EAAMmT,EAAK9U,UAAYA,SAElD,GAAoB,mBAAT8U,EAAqB,CAGrC,IAFAC,GAAY,EAEP5V,EAAI2V,EAAK1P,OAAS,EAAGjG,GAAK,EAAGA,IAChC,GAAI2V,EAAK3V,KAAOa,GAAY8U,EAAK3V,GAAGa,WAAaA,EAAU,CACzDgV,EAAmBF,EAAK3V,GAAGa,SAC3B+U,EAAW5V,EACX,MAIJ,GAAI4V,EAAW,EACb,OAAO/R,KAEQ,IAAb+R,EACFD,EAAKG,QAiIf,SAAmBH,EAAMI,GACvB,KAAOA,EAAQ,EAAIJ,EAAK1P,OAAQ8P,IAC9BJ,EAAKI,GAASJ,EAAKI,EAAQ,GAC7BJ,EAAKtL,MAlIG2L,CAAUL,EAAMC,GAGE,IAAhBD,EAAK1P,SACP+M,EAAOxQ,GAAQmT,EAAK,SAEQtD,IAA1BW,EAAOrB,gBACT9N,KAAKwP,KAAK,iBAAkB7Q,EAAMqT,GAAoBhV,GAG1D,OAAOgD,MAGbwN,EAAaT,UAAUqF,IAAM5E,EAAaT,UAAUe,eAEpDN,EAAaT,UAAUsF,mBACnB,SAA4B1T,GAC1B,IAAI+S,EAAWvC,EAAQhT,EAGvB,QAAeqS,KADfW,EAASnP,KAAKuO,SAEZ,OAAOvO,KAGT,QAA8BwO,IAA1BW,EAAOrB,eAUT,OATyB,IAArBE,UAAU5L,QACZpC,KAAKuO,QAAU7N,OAAO4O,OAAO,MAC7BtP,KAAKyO,aAAe,QACMD,IAAjBW,EAAOxQ,KACY,KAAtBqB,KAAKyO,aACTzO,KAAKuO,QAAU7N,OAAO4O,OAAO,aAEtBH,EAAOxQ,IAEXqB,KAIT,GAAyB,IAArBgO,UAAU5L,OAAc,CAC1B,IACInD,EADA0B,EAAOD,OAAOC,KAAKwO,GAEvB,IAAKhT,EAAI,EAAGA,EAAIwE,EAAKyB,SAAUjG,EAEjB,oBADZ8C,EAAM0B,EAAKxE,KAEX6D,KAAKqS,mBAAmBpT,GAK1B,OAHAe,KAAKqS,mBAAmB,kBACxBrS,KAAKuO,QAAU7N,OAAO4O,OAAO,MAC7BtP,KAAKyO,aAAe,EACbzO,KAKT,GAAyB,mBAFzB0R,EAAYvC,EAAOxQ,IAGjBqB,KAAK8N,eAAenP,EAAM+S,QACrB,QAAkBlD,IAAdkD,EAET,IAAKvV,EAAIuV,EAAUtP,OAAS,EAAGjG,GAAK,EAAGA,IACrC6D,KAAK8N,eAAenP,EAAM+S,EAAUvV,IAIxC,OAAO6D,MAoBbwN,EAAaT,UAAU2E,UAAY,SAAmB/S,GACpD,OAAOyR,EAAWpQ,KAAMrB,GAAM,IAGhC6O,EAAaT,UAAUuF,aAAe,SAAsB3T,GAC1D,OAAOyR,EAAWpQ,KAAMrB,GAAM,IAGhC6O,EAAamD,cAAgB,SAASjD,EAAS/O,GAC7C,MAAqC,mBAA1B+O,EAAQiD,cACVjD,EAAQiD,cAAchS,GAEtBgS,EAAc3D,KAAKU,EAAS/O,IAIvC6O,EAAaT,UAAU4D,cAAgBA,EAiBvCnD,EAAaT,UAAUwF,WAAa,WAClC,OAAOvS,KAAKyO,aAAe,EAAIlC,EAAevM,KAAKuO,SAAW,ICtajD,MAAMiE,EACnB1S,YAAY2S,GACVzS,KAAK0G,UAAYvL,EAAQ,gRAYzB6E,KAAK/E,MAAQwX,EACbzS,KAAK0S,QAAU1S,KAAK0G,UAAUE,cAAc,WAC5C5G,KAAK2S,SAAW3S,KAAK0G,UAAUE,cAAc,aAC7C5G,KAAK4S,KAAO5S,KAAK0G,UAAUE,cAAc,QAEzC6L,EAAQI,WAAWC,aAAa9S,KAAK0G,UAAW+L,GAChDzS,KAAK0G,UAAUoM,aAAaL,EAASzS,KAAK0G,UAAUqM,YAEpDN,EAAQzX,iBAAiB,SAAS,IAAMgF,KAAKgT,mBAC7ChT,KAAK/E,MAAMD,iBAAiB,aAAa,IAAMgF,KAAKiT,sBACpDjT,KAAK/E,MAAMD,iBAAiB,cAAc,IAAMgF,KAAKkT,uBACrDlT,KAAK/E,MAAMD,iBAAiB,YAAY,IAAMgF,KAAKmT,qBAEnDnT,KAAKoT,eAGPF,qBACElT,KAAK/E,MAAMoY,QAGbF,mBACEnT,KAAK/E,MAAMqY,OAGbL,oBACEjT,KAAK/E,MAAM4B,UAAUQ,IAAI,UAEzB,MAAMkW,EAAaxO,IAEjBzH,uBAAsBkW,IACpBxT,KAAK/E,MAAMqY,UAEbtT,KAAK/E,MAAM4B,UAAUO,OAAO,UAC5BtC,SAASqC,oBAAoB,UAAWoW,IAE1CzY,SAASE,iBAAiB,UAAWuY,GAGvClU,UAAUoU,GACRzT,KAAK/E,MAAMoE,MAAQoU,EACnBzT,KAAKkF,UAGP8N,iBACEhT,KAAKkF,UAGPA,UACE5H,uBAAsB,IAAM0C,KAAKoT,iBAGnCA,eACE,MAAM1N,IAAEA,EAAGD,IAAEA,EAAGpG,MAAEA,GAAUW,KAAK/E,MAC3ByY,GAAWpG,OAAOjO,GAASqG,IAAQD,EAAMC,GAE/C1F,KAAK2S,SAAStM,MAAMzE,MAClB5B,KAAK0S,QAAQrM,MAAMT,KAAiB,IAAV8N,EAAgB,IAE5C1T,KAAK4S,KAAK9H,YAAczL,GCpEb,MAAMsU,UAAiBnG,uBACpC1N,cACE0B,QAEAxB,KAAK4T,iBAAmB,KAExBlZ,EAASuH,MAAK,KACZjC,KAAK6T,cAAgB/P,MAAMC,KACzBjJ,SAASgZ,iBAAiB,6BAE5B9T,KAAK+T,cAAgBjQ,MAAMC,KACzBjJ,SAASgZ,iBAAiB,4BAG5B9T,KAAKgU,aAAe,IAAIpL,EACxB5I,KAAKiU,UAAYnZ,SAAS8L,cAAc,kBACxC5G,KAAKiU,UAAU1L,YAAYvI,KAAKgU,aAAatN,WAG7C1G,KAAKkU,WAAa,IAAIC,QAGtBrQ,MAAMC,KACJjJ,SAASgZ,iBAAiB,gCAC1BnP,SAAQjI,GAAMsD,KAAKkU,WAAW9U,IAAI1C,EAAI,IAAI8V,EAAe9V,MAE3DsD,KAAK0G,UAAY5L,SAAS8L,cAAc,aACxC5G,KAAKoU,UAAYtZ,SAAS8L,cAAc,sBAExC5G,KAAK0G,UAAU1L,iBAAiB,UAAU+J,GAAK/E,KAAKqU,UAAUtP,KAC9D/E,KAAK0G,UAAU1L,iBAAiB,SAAS+J,GAAK/E,KAAKqU,UAAUtP,KAC7D/E,KAAKoU,UAAUpZ,iBAAiB,SAAS+J,GAAK/E,KAAKsU,cAAcvP,KACjE/E,KAAKiU,UAAUjZ,iBAAiB,SAAS+J,GAAK/E,KAAKuU,SAASxP,KAK5D/E,KAAKoU,UAAUpZ,iBAAiB,aAAa+J,IACvCA,EAAE7H,OAAOsX,QAAQ,sBACrBzP,EAAEI,uBAKRmP,cAAcrX,GAGPA,EAAMuI,YACTvI,EAAMkI,iBACNlI,EAAMwX,cAAcC,WAAazX,EAAMsI,QAI3C8O,UAAUpX,GACRoM,aAAarJ,KAAK4T,kBAGO,SAArB3W,EAAMC,OAAOyB,KACfqB,KAAK4T,iBAAmBpW,YAAW,IAAMwC,KAAKwP,KAAK,WAAW,KAG9DxP,KAAKwP,KAAK,UAId+E,WACEvU,KAAKgU,aAAanL,UAClB,MAAM8L,EAAc3U,KAAK4U,cAEzB,IAAK,MAAMC,KAAW7U,KAAK+T,cACL,YAAhBc,EAAQlW,KACVkW,EAAQC,QAAUD,EAAQE,aAAa,WAEhB,SAAhBF,EAAQlW,OACfqB,KAAKkU,WAAWlV,IAAI6V,GAASxV,MAAQwV,EAAQG,aAAa,UAI9D,IAAK,MAAMH,KAAW7U,KAAK6T,cACzBgB,EAAQC,QAAUD,EAAQE,aAAa,WAGzC/U,KAAKwP,KAAK,QAASmF,GACnB3U,KAAKwP,KAAK,UAGZyF,YAAYC,GACV,IAAK,MAAML,KAAW7U,KAAK+T,cACnBc,EAAQlH,QAAQuH,IAEF,YAAhBL,EAAQlW,KACVkW,EAAQC,QAAUI,EAASL,EAAQlH,MAEZ,SAAhBkH,EAAQlW,OACfqB,KAAKkU,WAAWlV,IAAI6V,GAASxV,MAAQ6V,EAASL,EAAQlH,QAI1D,IAAK,MAAMkH,KAAW7U,KAAK6T,cACnBgB,EAAQlH,QAAQuH,EAASC,UAC/BN,EAAQC,QAAUI,EAASC,QAAQN,EAAQlH,OAI/CiH,cAEE,MAAMQ,EAAc,GAEdC,EAAS,CACbF,QAAS,IA4BX,OAzBAnV,KAAK+T,cAAcpP,SAAQkQ,IACL,QAAhBA,EAAQlH,MAAkC,YAAhBkH,EAAQlH,OAChB,YAAhBkH,EAAQlW,KACVyW,EAAY3M,KAAK6E,OAAOuH,EAAQC,UAGhCM,EAAY3M,KAAK,IAAMoM,EAAQxV,MAAQ,MAIvB,YAAhBwV,EAAQlW,KACV0W,EAAOR,EAAQlH,MAAQkH,EAAQC,QAG/BO,EAAOR,EAAQlH,MAAQkH,EAAQxV,SAInCW,KAAK6T,cAAclP,SAAQkQ,IACzBO,EAAY3M,KAAK6E,OAAOuH,EAAQC,UAChCO,EAAOF,QAAQN,EAAQlH,MAAQkH,EAAQC,WAGzCO,EAAOD,YAAcA,EAAYE,OAE1BD,GCtII,MAAME,UAAiB/H,uBACpC1N,cACE0B,QAEAxB,KAAKwV,WAAY,EACjBxV,KAAK8J,SAAW,IAAIf,EAEpBrO,EAASuH,MAAK,KACZjC,KAAK0G,UAAY5L,SAAS8L,cAAc,cACxC5G,KAAKyV,eAAiB3a,SAAS8L,cAAc,oBAC7C5G,KAAK0V,YAAc5a,SAAS8L,cAAc,gBAC1C5G,KAAK2V,aAAe7a,SAAS8L,cAAc,cAC3C5G,KAAK4V,aAAe9a,SAAS8L,cAAc,cAC3C5G,KAAK6V,YAAc/a,SAAS8L,cAAc,eAC1C5G,KAAK8V,SAAW9V,KAAK0G,UAAUE,cAAc,YAC7C5G,KAAK+V,MAAQ/V,KAAK0G,UAAUE,cAAc,SAE1C9L,SAAS8L,cAAc,aACpB5L,iBAAiB,SAAS+J,GAAK/E,KAAKgW,mBAAmBjR,KAE1D/E,KAAK8V,SAAS9a,iBAAiB,SAAS+J,GAAK/E,KAAKiW,gBAAgBlR,KAElE/E,KAAK4V,aAAa5a,iBAAiB,SAAS+J,GAAK/E,KAAKkW,iBAAiBnR,KACvE/E,KAAK2V,aAAa3a,iBAAiB,SAAS+J,GAAK/E,KAAKmW,iBAAiBpR,KACvE/E,KAAKyV,eAAeza,iBAAiB,UAAU+J,GAAK/E,KAAKoW,mBAAmBrR,KAC5E/E,KAAK0V,YAAY1a,iBAAiB,SAAS+J,GAAK/E,KAAKqW,mBAAmBtR,QAI5EoE,OACEnJ,KAAK0G,UAAU7J,UAAUO,OAAO,UAChCO,EAAoBqC,KAAK8V,SAAU,UACnCnY,EAAoBqC,KAAK+V,MAAO,UAGlCzM,OACOtJ,KAAKwV,YACVxV,KAAKsW,cACLtW,KAAK0G,UAAU7J,UAAUQ,IAAI,UAC7BK,EAAkBsC,KAAK8V,SAAU,UACjCpY,EAAkBsC,KAAK+V,MAAO,WAGhCO,cACEtW,KAAK8J,SAASR,OAGhBiN,iBACEvW,KAAKyV,eAAee,QAGtBP,gBAAgBhZ,GACdA,EAAMkI,iBACNnF,KAAKsJ,OAGP0M,mBAAmB/Y,GACjBA,EAAMkI,iBACNnF,KAAKmJ,OAGPkN,mBAAmBpZ,GACjB,MAAMf,EAAM8D,KAAK0V,YAAYrW,MAAMoX,OAE/Bva,EAAIwa,SAAS,YACf1W,KAAK0V,YAAYrW,MAAQ,GACzBW,KAAK0V,YAAYpC,OAEjBtT,KAAK6V,YAAYtN,YAAYvI,KAAK8J,SAASpD,WAC3C1G,KAAK8J,SAASX,OAEdnJ,KAAKwP,KAAK,cAAe,CACvBvO,KAAM/E,EACNmO,SAAU,eAKhB6L,iBAAiBjZ,GACfA,EAAMkI,iBACNlI,EAAMC,OAAOoW,OACbtT,KAAKuW,iBAGPH,yBAAyBnZ,GACvB,MAAMZ,EAAO2D,KAAKyV,eAAekB,MAAM,GAElCta,IAEL2D,KAAK4V,aAAarN,YAAYvI,KAAK8J,SAASpD,WAC5C1G,KAAK8J,SAASX,OAEdnJ,KAAKwP,KAAK,cAAe,CACvBvO,WAAY7E,EAAeC,GAC3BgO,SAAUhO,EAAKsR,QAInBwI,uBAAuBlZ,GACrBA,EAAMkI,iBACNlI,EAAMC,OAAOoW,OACbtT,KAAK2V,aAAapN,YAAYvI,KAAK8J,SAASpD,WAC5C1G,KAAK8J,SAASX,OAEd,IACEnJ,KAAKwP,KAAK,cAAe,CACvBvO,WAAY2V,MAAM,0BAA0B3U,MAAKC,GAAKA,EAAE3F,SACxD8N,SAAU,iBAGd,MAAOwD,GAGL,CAGE,IAAIzP,EAFJ4B,KAAKsW,cAKHlY,EADE,kBAAmB+L,WAAaA,UAAU0M,cAAcC,WAClDjW,MAAM,8BAGNA,MAAM,2BAGhBb,KAAKwP,KAAK,QAAS,CAAEpR,MAAAA,OCpI7B,MAAM2Y,EACJjX,YAAYiB,EAASiW,EAAUC,GAC7BjX,KAAK0G,UAAYvL,EACf,8DAGF6E,KAAKkX,SAAWlX,KAAK0G,UAAUE,cAAc,kBAC7C5G,KAAKkX,SAASpM,YAAc/J,EAC5Bf,KAAKmX,eACLnX,KAAKoX,aAELpX,KAAKqX,OAAS,IAAI1c,SAAQuH,GAAKlC,KAAKmX,eAAiBjV,IAErD+U,EAAQtS,SAAQ2S,IACd,IAAIC,EAAWzc,SAAS+P,cAAc,UACtC0M,EAAS5a,UAAY,WACrB4a,EAASzM,YAAcwM,EACvBC,EAASvc,iBAAiB,SAAS,KACjCgF,KAAKmX,eAAeG,MAEtBtX,KAAK0G,UAAU6B,YAAYgP,MAGzBP,IACFhX,KAAKoX,aAAe5Z,YAAW,IAAMwC,KAAKsJ,QAAQ0N,IAItD1N,OAGE,OAFAD,aAAarJ,KAAKoX,cAClBpX,KAAKmX,iBACEzZ,EAAkBsC,KAAK0G,UAAW,SAI9B,MAAM8Q,EACnB1X,cACEE,KAAK0G,UAAYvL,EAAQ,8BAG3BgO,KAAKpI,GAASiW,SACZA,EAAW,EAACC,QACZA,EAAU,CAAC,YACX,IACA,MAAMQ,EAAQ,IAAIV,EAAMhW,EAASiW,EAAUC,GAO3C,OANAjX,KAAK0G,UAAU6B,YAAYkP,EAAM/Q,WAEjC+Q,EAAMJ,OAAOpV,MAAK,IAAMwV,EAAMnO,SAAQrH,MAAK,KACzCjC,KAAK0G,UAAUiC,YAAY8O,EAAM/Q,cAG5B+Q,GC5CI,MAAMC,UAAiBlK,uBACpC1N,cACE0B,QACAxB,KAAK0G,UAAYvL,EACf,4CAIF6E,KAAK2X,cAAgB,EACrB3X,KAAK4X,uBAAyB,KAE9Bld,EAASuH,MAAKuR,IACZ1Y,SAASE,iBAAiB,YAAYiC,GAASA,EAAMkI,mBACrDrK,SAASE,iBAAiB,aAAaiC,GAAS+C,KAAK6X,aAAa5a,KAClEnC,SAASE,iBAAiB,aAAaiC,GAAS+C,KAAK8X,aAAa7a,KAClEnC,SAASE,iBAAiB,QAAQiC,GAAS+C,KAAK+X,QAAQ9a,QAI5D4a,aAAa5a,GAGP+C,KAAK4X,wBAA0B3a,EAAMC,SACzC8C,KAAK4X,uBAAyB3a,EAAMC,OAE/B8C,KAAK2X,iBACRja,EAAkBsC,KAAK0G,YAI3BoR,aAAa7a,GACX+C,KAAK4X,uBAAyB,OAEvB5X,KAAK2X,eACVha,EAAoBqC,KAAK0G,WAI7BqR,cAAc9a,GACZA,EAAMkI,iBAENnF,KAAK2X,cAAgB,EACrBha,EAAoBqC,KAAK0G,WAEzB,MAAMrK,EAAOY,EAAM+a,aAAarB,MAAM,GACjCta,GAEL2D,KAAKwP,KAAK,cAAe,CACvBvO,WAAY7E,EAAeC,GAC3BgO,SAAUhO,EAAKsR,QCxDN,MAAMsK,GACnBnY,cACEpF,EAASuH,MAAKuR,IACZxT,KAAK0G,UAAY5L,SAAS8L,cAAc,cACxC5G,KAAKkY,UAAYlY,KAAK0G,UAAU7J,UAAUC,SAAS,UACnDkD,KAAKsJ,UAITA,mBACQ3L,EAAoBqC,KAAK0G,UAAW,UAC1C1G,KAAK0G,UAAUL,MAAM4C,QAAU,QCXpB,MAAMkP,GACnBrY,YAAYsY,GACVpY,KAAK0G,UAAYvL,EAAQ,yCACzB6E,KAAKqY,eAAiBD,EAGxBE,kBAAkBC,GAChB,GAAIA,GAAqBvY,KAAKqY,eAAgB,OAC9C,MAAMG,QAAkB5B,MAAM,kBAAkB3U,MAAKC,GAAKA,EAAEuW,SAC5D,IAAIC,EAAa,EACbC,EAAW,EAEf,IAAK,IAAIxc,EAAI,EAAGA,EAAIqc,EAAUpW,OAAQjG,IAAK,CACzC,MAAMyc,EAAQJ,EAAUrc,GAExB,GAAIyc,EAAMC,UAAY7Y,KAAKqY,eACzBK,EAAavc,OAEV,GAAIyc,EAAMC,UAAYN,EACzB,MAEFI,EAAWxc,EAAI,EAGjB,MAAM2c,EAAYN,EAAUzK,MAAM2K,EAAYC,GAC3C1c,QAAO,CAACsU,EAAKqI,IAAUrI,EAAInD,OAAOwL,EAAMG,UAAU,IAClDld,KAAImd,GAAUtd,CAAa,OAAOsd,WAErChZ,KAAK0G,UAAU6B,YAAYpN,EAAQ,sBACnC6E,KAAK0G,UAAU6B,YAAYpN,EACzB,OACE2d,EAAUxD,KAAK,IACjB,gBAGI5a,EACNgD,EAAkBsC,KAAK0G,YCpCZ,MAAMuS,GACnBnZ,YAAYoZ,GACVlZ,KAAKmZ,SAAWD,EAEhBxe,EAASuH,MAAKuR,IACZxT,KAAKoZ,iBAAmBte,SAAS8L,cAAc,6BAC/C5G,KAAKqZ,WAAave,SAAS8L,cAAc,sBACzC5G,KAAKsZ,OAASC,WAAW,sBAEzBvZ,KAAKsZ,OAAO3H,aAAY,IAAM3R,KAAKwZ,qBACnCxZ,KAAKwZ,sBAITA,mBACMxZ,KAAKsZ,OAAOG,QACdzZ,KAAKqZ,WAAW9Q,YAAYvI,KAAKmZ,SAASzS,WAG1C1G,KAAKoZ,iBAAiB7Q,YAAYvI,KAAKmZ,SAASzS,YCfvC,MAAMgT,WAAoBlM,uBACvC1N,cACE0B,QAEAxB,KAAK0G,UAAY,KAEjBhM,EAASuH,MAAK,KACZjC,KAAK0G,UAAY5L,SAAS8L,cAAc,iBAGxC5G,KAAK0G,UAAU2O,OAAO,GAAGP,SAAU,EAEnC9U,KAAK0G,UAAU1L,iBAAiB,UAAU+J,GAAK/E,KAAKqU,UAAUtP,QAIlEsP,UAAUpX,GACR,IAAIoC,EAAQW,KAAK0G,UAAU2O,OAAOhW,MAE7BA,IACHA,EAAQyE,MAAMC,KAAK/D,KAAK0G,UAAU2O,QAAQpZ,QAAO,CAACoD,EAAOsa,IAChDta,IAAUsa,EAAM7E,QAAU6E,EAAMta,MAAQ,KAC9C,KAGLW,KAAKwP,KAAK,SAAU,CAAEnQ,MAAAA,KC/BX,MAAMua,GACnB9Z,YAAYkC,GACVhC,KAAK6Z,MAAQ7X,EACbhC,KAAK8Z,QAGPA,QACE9Z,KAAK+Z,cAAgB,GACrB/Z,KAAKga,OAAS,GACdha,KAAKia,OAAS,EAGhB5c,IAAI+X,EAAanO,GACf,MAAMiT,EAAUla,KAAKga,OAAOha,KAAKia,QAE7BC,GAEFA,EAAQ1Z,UAGVR,KAAK+Z,cAAc/Z,KAAKia,QAAU7E,EAClCpV,KAAKga,OAAOha,KAAKia,QAAUhT,EAE3BjH,KAAKia,QAAUja,KAAKia,OAAS,GAAKja,KAAK6Z,MAGzCM,MAAM/E,GACJ,OAAOpV,KAAKga,OAAOha,KAAK+Z,cAAcK,QAAQhF,KCzBnC,MAAMiF,GACnBva,eAAewa,GACbta,KAAKua,YAAa,EAClBva,KAAKwa,YAAcF,EAGrBG,WACE,IAAIza,KAAKua,WAGT,OAFAva,KAAKua,YAAa,EAEX5f,QAAQ+N,IACb1I,KAAKwa,YAAY3e,KAAIa,GAAMgB,EAAkBhB,OCOnD,MAAMge,GAAO,ICjBE,cAAmB7a,EAChCC,cACE0B,MAAM,qBACNxB,KAAK2a,uBAAwB,EAC7B3a,KAAK4a,YAAcjgB,QAAQC,UAG7BigB,WAAWC,GACT,MAAMlZ,MAACA,EAAKC,OAAEA,SAAgB7B,KAAKsB,iBAAiB,CAClDyZ,OAAQ,OACR9Z,KAAM6Z,IAGR,OAAO,IAAInZ,EAAQmZ,EAASlZ,EAAOC,GAGrCmZ,QAAQ9F,EAAU+F,GAChB,OAAOjb,KAAK4a,YAAc5a,KAAKkb,eAAejZ,MAAKxD,UACjDuB,KAAK2a,uBAAwB,EAE7B,IAAIrc,QAAe0B,KAAKsB,iBAAiB,CACvCyZ,OAAQ,UACR7F,SAAAA,IAGF,IAAIiG,EAAa,IAAIxZ,EAAQrD,EAAO2C,KAAM3C,EAAO8c,WAAWxZ,MAAOtD,EAAO8c,WAAWvZ,QAIrF,GAFAoZ,EAAkBE,GAEdjG,EAASmG,UACX,KAAO/c,QAAe0B,KAAKsb,YAAY,CACrC,GAAItb,KAAK2a,sBACP,MAAM9Z,MAAM,SAEdsa,EAAa,IAAIxZ,EAAQrD,EAAO2C,KAAM3C,EAAO8c,WAAWxZ,MAAOtD,EAAO8c,WAAWvZ,QACjFoZ,EAAkBE,GAKtB,OAAOA,KAIXG,WACE,OAAOtb,KAAKsB,iBAAiB,CAC3ByZ,OAAQ,aAIZG,qBACElb,KAAK2a,uBAAwB,QACvB3a,KAAK4a,YAGbpa,sBACQR,KAAKkb,eACX1Z,MAAMhB,Y9B6BH,IACD+a,GAAAA,GAAc,QAElBzgB,SAASiQ,KAAK/P,iBAAiB,SAASiC,IACtCA,EAAMC,OAAOL,UAAUQ,IAAmB,OAAfke,GAAuB,cAAgB,oBACjE,GAEHzgB,SAASiQ,KAAK/P,iBAAiB,QAAQiC,IACrCA,EAAMC,OAAOL,UAAUO,OAAO,eAC9BH,EAAMC,OAAOL,UAAUO,OAAO,oBAC7B,GAEHtC,SAASiQ,KAAK/P,iBAAiB,WAAW,KACxCugB,GAAc,SACb,GAEHzgB,SAASiQ,KAAK/P,iBAAiB,aAAa,KAC1CugB,GAAc,WACb,G+BvGL,IFkBe,MACbzb,cACEE,KAAKqZ,WAAa,KAGlBrZ,KAAKwb,QAAU,KACfxb,KAAKyb,UAAY,IAAI7T,EACrB5H,KAAK0b,kBAAoB,IAAIxR,EAC7BlK,KAAK2b,cAAgB,IAAIjR,EACzB1K,KAAK4b,UAAY,IAAItQ,EACrBtL,KAAK6b,WAAa,IAAI3P,EACtBlM,KAAK8b,YAAc,IAAInI,EACvB3T,KAAK+b,YAAc,IAAIxG,EACvBvV,KAAKgc,UAAY,IAAIxE,EACrBxX,KAAKic,QAAU,IAAIvE,EACnB1X,KAAKkc,aAAe,IAAIjE,GACxBjY,KAAKmc,aAAe,IAAIhE,GAAU3Y,KAAKqZ,SACvC7Y,KAAKoc,oBAAsB,IAAInD,GAAiBjZ,KAAK6b,YACrD7b,KAAKqc,eAAiB,IAAI3C,GAG1B1Z,KAAK8b,YAAYzN,GAAG,UAAU,IAAMrO,KAAKsc,sBACzCtc,KAAK8b,YAAYzN,GAAG,SAASsG,GAAe3U,KAAKuc,iBAAiB5H,KAClE3U,KAAK+b,YAAY1N,GAAG,eAAetJ,GAAK/E,KAAKgT,eAAejO,KAC5D/E,KAAKic,QAAQ5N,GAAG,eAAetJ,GAAK/E,KAAKgT,eAAejO,KACxD/E,KAAK+b,YAAY1N,GAAG,SAAS,EAAEjQ,MAAAA,KAAW4B,KAAKwc,aAAape,KAC5D4B,KAAKqc,eAAehO,GAAG,UAAUtJ,GAAK/E,KAAKyc,uBAAuB1X,KAClEmG,OAAOlQ,iBAAiB,WAAW+J,GAAK/E,KAAK0c,iBAAiB3X,KAG9D/E,KAAK2c,WAAa,KAClB3c,KAAK4c,OAAS,IAAIhD,GAAa,IAC/B5Z,KAAK6c,qBAAuB,EAC5B7c,KAAK8c,oBAAqB,EAC1B9c,KAAK+c,YAAa,EAEd,kBAAmB5S,WACrBA,UAAU0M,cAAcmG,SAAS,QAAS,CACxCC,MAAO,OACNhb,MAAKib,IACNA,EAAaliB,iBAAiB,eAAe,IAAMgF,KAAKmd,eAAeD,QAK3EE,EAAQpe,IAAI,qBAAqBiD,MAAKob,IAChCA,GACFrd,KAAKmc,aAAa7D,YAAY+E,GAEhCD,EAAQhe,IAAI,oBAAqBI,KAAKqZ,YAGxCne,EAASuH,MAAK,KACZjC,KAAKqZ,WAAave,SAAS8L,cAAc,eAGzC5G,KAAKwb,QAAU,IAAInB,GACjBvf,SAAS8L,cAAc,YACvB9L,SAAS8L,cAAc,4BACvB5G,KAAKyb,UAAU/U,UACf1G,KAAK8b,YAAYpV,WAGnB,MAAM4W,EAAkBxiB,SAAS8L,cAAc,4BACzC2W,EAAuBziB,SAAS8L,cAAc,2BAEpD2W,EAAqBhV,YAAYvI,KAAK4b,UAAUlV,WAE5C8D,GACF+S,EAAqBhV,YAAYvI,KAAK2b,cAAcjV,WAGtD4W,EAAgB/U,YAAYvI,KAAK0b,kBAAkBhV,WAEnD5L,SAAS8L,cAAc,WAAW2B,YAAYvI,KAAKyb,UAAU/U,WAC7D1G,KAAKqZ,WAAW9Q,YAAYvI,KAAKgc,UAAUtV,WAC3C1G,KAAKqZ,WAAW9Q,YAAYvI,KAAKic,QAAQvV,WACzC5L,SAAS8L,cAAc,eAAe2B,YAAYvI,KAAKmc,aAAazV,WAGpE1G,KAAKwd,gBAGDxd,KAAKkc,aAAahE,WACpBlY,KAAKgc,UAAU7S,KAAK,aAAc,CAChC6N,SAAU,SAgBlB0F,iBAAiBzf,GACG,MAAdA,EAAMgC,MAAgBhC,EAAMwgB,SAAWxgB,EAAMygB,WAC/CzgB,EAAMkI,iBACNnF,KAAK+b,YAAYxF,kBAIrBkG,uBAAuBxf,GACrB+C,KAAKyb,UAAUrc,IAAInC,EAAMoC,OAG3B8d,eAAeD,GACb,MAAMS,EAAYT,EAAaU,WAE/BV,EAAaU,WAAW5iB,iBAAiB,eAAeyD,UACtD,IAAIuB,KAAK+c,WAIT,GAAuB,aAAnBY,EAAUzN,OAAyB/F,UAAU0M,cAAcC,YAO/D,GAAuB,aAAnB6G,EAAUzN,OAAwB/F,UAAU0M,cAAcC,WAAY,CAExE,IAAK9W,KAAK8c,mBAGR,OAFA9c,KAAK+c,YAAa,OAClBc,SAASC,SAKX,MAAMrG,EAAQzX,KAAKgc,UAAU7S,KAAK,mBAAoB,CACpD8N,QAAS,CAAC,SAAU,aAKR,gBAFOQ,EAAMJ,SAGzBrX,KAAK+c,YAAa,EAClBc,SAASC,gBAvBX9d,KAAKgc,UAAU7S,KAAK,wBAAyB,CAC3C6N,SAAU,SA4BlBsF,oBACE,MAAMpH,EAAWlV,KAAK8b,YAAYlH,cAClC5U,KAAK+d,cAAc7I,GACnBlV,KAAKge,aAAa9I,GAGpBqH,uBAAuB5H,GACrB,MAAM8C,EAAQzX,KAAKgc,UAAU7S,KAAK,iBAAkB,CAClD8N,QAAS,CAAC,OAAQ,WAClBD,SAAU,MAGiB,eAAlBS,EAAMJ,SACfrX,KAAK8b,YAAY7G,YAAYN,GAC7B3U,KAAKsc,qBAITtJ,qBAAqB/V,GACnB,MAAMiY,EAAWlV,KAAK8b,YAAYlH,cAClC5U,KAAK8c,oBAAqB,EAE1B,IACE9c,KAAK2c,iBAAmBjC,GAAKG,KAAK5d,EAAMgE,MACxCjB,KAAKie,eAAiBhhB,EAAMoN,SAE9B,MAAMtF,GAGJ,CACE,MAAM3G,EAAQ,IAAIyC,MAAM,gBAAkBkE,EAAEhE,SAG5C,OAFAf,KAAK+b,YAAYzF,mBACjBtW,KAAKwc,aAAape,IAKtB4B,KAAK4c,OAAO9C,QAEZ,IAAIoE,GAAiB,EAErB,MAAMC,EAAa,KACbD,IACFle,KAAKyb,UAAUxW,QACfjF,KAAKwb,QAAQf,WACbza,KAAK+b,YAAYvG,WAAY,EAC7BxV,KAAK+b,YAAYzS,OACjB4U,GAAiB,IAIrBle,KAAKge,aAAa9I,GAAU,IAAMiJ,MAE9BD,GACFC,IAIJ3B,aAAazX,GACX/E,KAAKgc,UAAU7S,KAAKpE,EAAEhE,SACtBI,QAAQ/C,MAAM2G,GAGhByY,sBACE,MAAMtI,QAAiBkI,EAAQpe,IAAI,YAC/BkW,GAAUlV,KAAK8b,YAAY7G,YAAYC,GAG7C6I,cAAc7I,GACZ,MAAMrE,EAAOnQ,OAAO0d,OAAO,GAAIlJ,UAExBrE,EAAKwN,SACZjB,EAAQhe,IAAI,WAAYyR,GAG1BmN,mBAAmB9I,EAAU+F,EAAoB,cAC/C,MAAMqD,EAAYte,KAAK6c,qBAAuBxZ,KAAKkb,SAInD,SAFM7D,GAAKQ,eAEPoD,GAAate,KAAK6c,qBAGpB,OAGF,GAAI3H,EAASmJ,SAIX,YAHAre,KAAKwe,eAAexe,KAAK2c,WAAY,CACnClb,SAAUyT,EAAS3T,OAKvB,MAAMkd,EAAaze,KAAK4c,OAAOzC,MAAMjF,EAASE,aAE9C,GAAIqJ,EACFze,KAAKwe,eAAeC,EAAY,CAC9BC,cAAe1e,KAAK2c,WACpBlb,SAAUyT,EAAS3T,WAHvB,CAQAvB,KAAK0b,kBAAkB1R,UAEvB,IACE,MAAM2U,QAAwBjE,GAAKM,QAAQ9F,GAAUiG,IACnDF,EAAkBE,GAClBnb,KAAKwe,eAAerD,EAAY,CAC9BuD,cAAe1e,KAAK2c,WACpBlb,SAAUyT,EAAS3T,UAIvBvB,KAAK4c,OAAOvf,IAAI6X,EAASE,YAAauJ,GAExC,MAAM5Z,GACJ,GAAiB,SAAbA,EAAEhE,QAAoB,OAC1BgE,EAAEhE,QAAU,oBAAsBgE,EAAEhE,QACpCf,KAAKwc,aAAazX,WAGlB/E,KAAK0b,kBAAkBzR,SAI3BuU,qBAAqBvX,GAASyX,cAAEA,EAAajd,SAAEA,IAC7CzB,KAAKyb,UAAUtT,OAAOlB,GACtBjH,KAAK0b,kBAAkBpR,YAAYtK,KAAKie,eAAgBhX,GACxDjH,KAAK2b,cAActQ,YAAYpE,EAAQ1K,MAEvCyD,KAAK6b,WAAW1T,OAAO,CACrBmE,eAAgBoS,SAAwBA,EAAc1c,KAAK,CAAEP,SAAAA,IAC7DO,WAAYiF,EAAQjF,KAAK,CAAEP,SAAAA"}